ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   1


PC     Object              I  Line    Source 
                           A     1    ; ZiLOG ZNEO ANSI C Compiler Release 1.11
                           A     2    ; -model=S -nomodsect -regvar -noreduceopt -debug -peephole
                           A     3    ; -localcse -optsize -const=ROM -alias -fastcall 
                           A     4    	FILE	"..\LED_INTERRUPTS.C"
                           A     5    .debug "C"
                           A     6    	SEGMENT NEAR_DATA
00000000                   A     7    _char_data:
00000000 00                A     8    	DB	0
00000001 00                A     9    	DB	0
00000002 00                A    10    	DB	0
00000003 00                A    11    	DB	0
00000004 00                A    12    	DB	0
00000005 00                A    13    	DB	0
00000006 00                A    14    	DB	0
00000007 04                A    15    	DB	4
00000008 04                A    16    	DB	4
00000009 04                A    17    	DB	4
0000000A 04                A    18    	DB	4
0000000B 04                A    19    	DB	4
0000000C 00                A    20    	DB	0
0000000D 04                A    21    	DB	4
0000000E 0A                A    22    	DB	10
0000000F 0A                A    23    	DB	10
00000010 00                A    24    	DB	0
00000011 00                A    25    	DB	0
00000012 00                A    26    	DB	0
00000013 00                A    27    	DB	0
00000014 00                A    28    	DB	0
00000015 00                A    29    	DB	0
00000016 0A                A    30    	DB	10
00000017 1F                A    31    	DB	31
00000018 0A                A    32    	DB	10
00000019 1F                A    33    	DB	31
0000001A 0A                A    34    	DB	10
0000001B 00                A    35    	DB	0
0000001C 04                A    36    	DB	4
0000001D 0F                A    37    	DB	15
0000001E 14                A    38    	DB	20
0000001F 0E                A    39    	DB	14
00000020 05                A    40    	DB	5
00000021 1E                A    41    	DB	30
00000022 04                A    42    	DB	4
00000023 18                A    43    	DB	24
00000024 19                A    44    	DB	25
00000025 02                A    45    	DB	2
00000026 04                A    46    	DB	4
00000027 08                A    47    	DB	8
00000028 13                A    48    	DB	19
00000029 03                A    49    	DB	3
0000002A 0E                A    50    	DB	14
0000002B 0A                A    51    	DB	10
0000002C 0C                A    52    	DB	12
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   2


PC     Object              I  Line    Source led_interrupts.src
0000002D 08                A    53    	DB	8
0000002E 15                A    54    	DB	21
0000002F 13                A    55    	DB	19
00000030 0E                A    56    	DB	14
00000031 04                A    57    	DB	4
00000032 04                A    58    	DB	4
00000033 00                A    59    	DB	0
00000034 00                A    60    	DB	0
00000035 00                A    61    	DB	0
00000036 00                A    62    	DB	0
00000037 00                A    63    	DB	0
00000038 01                A    64    	DB	1
00000039 02                A    65    	DB	2
0000003A 04                A    66    	DB	4
0000003B 04                A    67    	DB	4
0000003C 04                A    68    	DB	4
0000003D 02                A    69    	DB	2
0000003E 01                A    70    	DB	1
0000003F 10                A    71    	DB	16
00000040 08                A    72    	DB	8
00000041 04                A    73    	DB	4
00000042 04                A    74    	DB	4
00000043 04                A    75    	DB	4
00000044 08                A    76    	DB	8
00000045 10                A    77    	DB	16
00000046 00                A    78    	DB	0
00000047 04                A    79    	DB	4
00000048 15                A    80    	DB	21
00000049 1F                A    81    	DB	31
0000004A 15                A    82    	DB	21
0000004B 04                A    83    	DB	4
0000004C 00                A    84    	DB	0
0000004D 00                A    85    	DB	0
0000004E 04                A    86    	DB	4
0000004F 04                A    87    	DB	4
00000050 1F                A    88    	DB	31
00000051 04                A    89    	DB	4
00000052 04                A    90    	DB	4
00000053 00                A    91    	DB	0
00000054 00                A    92    	DB	0
00000055 00                A    93    	DB	0
00000056 00                A    94    	DB	0
00000057 00                A    95    	DB	0
00000058 00                A    96    	DB	0
00000059 02                A    97    	DB	2
0000005A 04                A    98    	DB	4
0000005B 00                A    99    	DB	0
0000005C 00                A   100    	DB	0
0000005D 00                A   101    	DB	0
0000005E 0E                A   102    	DB	14
0000005F 00                A   103    	DB	0
00000060 00                A   104    	DB	0
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   3


PC     Object              I  Line    Source led_interrupts.src
00000061 00                A   105    	DB	0
00000062 00                A   106    	DB	0
00000063 00                A   107    	DB	0
00000064 00                A   108    	DB	0
00000065 00                A   109    	DB	0
00000066 00                A   110    	DB	0
00000067 06                A   111    	DB	6
00000068 06                A   112    	DB	6
00000069 00                A   113    	DB	0
0000006A 01                A   114    	DB	1
0000006B 02                A   115    	DB	2
0000006C 04                A   116    	DB	4
0000006D 08                A   117    	DB	8
0000006E 10                A   118    	DB	16
0000006F 00                A   119    	DB	0
00000070 0E                A   120    	DB	14
00000071 11                A   121    	DB	17
00000072 13                A   122    	DB	19
00000073 15                A   123    	DB	21
00000074 19                A   124    	DB	25
00000075 11                A   125    	DB	17
00000076 0E                A   126    	DB	14
00000077 04                A   127    	DB	4
00000078 0C                A   128    	DB	12
00000079 04                A   129    	DB	4
0000007A 04                A   130    	DB	4
0000007B 04                A   131    	DB	4
0000007C 04                A   132    	DB	4
0000007D 1F                A   133    	DB	31
0000007E 0E                A   134    	DB	14
0000007F 11                A   135    	DB	17
00000080 01                A   136    	DB	1
00000081 06                A   137    	DB	6
00000082 08                A   138    	DB	8
00000083 10                A   139    	DB	16
00000084 1F                A   140    	DB	31
00000085 0E                A   141    	DB	14
00000086 11                A   142    	DB	17
00000087 01                A   143    	DB	1
00000088 06                A   144    	DB	6
00000089 01                A   145    	DB	1
0000008A 11                A   146    	DB	17
0000008B 0E                A   147    	DB	14
0000008C 10                A   148    	DB	16
0000008D 11                A   149    	DB	17
0000008E 11                A   150    	DB	17
0000008F 1F                A   151    	DB	31
00000090 01                A   152    	DB	1
00000091 01                A   153    	DB	1
00000092 01                A   154    	DB	1
00000093 1F                A   155    	DB	31
00000094 10                A   156    	DB	16
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   4


PC     Object              I  Line    Source led_interrupts.src
00000095 10                A   157    	DB	16
00000096 1E                A   158    	DB	30
00000097 01                A   159    	DB	1
00000098 11                A   160    	DB	17
00000099 0E                A   161    	DB	14
0000009A 0E                A   162    	DB	14
0000009B 11                A   163    	DB	17
0000009C 10                A   164    	DB	16
0000009D 1E                A   165    	DB	30
0000009E 11                A   166    	DB	17
0000009F 11                A   167    	DB	17
000000A0 0E                A   168    	DB	14
000000A1 1F                A   169    	DB	31
000000A2 01                A   170    	DB	1
000000A3 01                A   171    	DB	1
000000A4 02                A   172    	DB	2
000000A5 04                A   173    	DB	4
000000A6 04                A   174    	DB	4
000000A7 04                A   175    	DB	4
000000A8 0E                A   176    	DB	14
000000A9 11                A   177    	DB	17
000000AA 11                A   178    	DB	17
000000AB 0E                A   179    	DB	14
000000AC 11                A   180    	DB	17
000000AD 11                A   181    	DB	17
000000AE 0E                A   182    	DB	14
000000AF 0E                A   183    	DB	14
000000B0 11                A   184    	DB	17
000000B1 11                A   185    	DB	17
000000B2 0F                A   186    	DB	15
000000B3 01                A   187    	DB	1
000000B4 01                A   188    	DB	1
000000B5 01                A   189    	DB	1
000000B6 00                A   190    	DB	0
000000B7 04                A   191    	DB	4
000000B8 04                A   192    	DB	4
000000B9 00                A   193    	DB	0
000000BA 04                A   194    	DB	4
000000BB 04                A   195    	DB	4
000000BC 00                A   196    	DB	0
000000BD 00                A   197    	DB	0
000000BE 00                A   198    	DB	0
000000BF 04                A   199    	DB	4
000000C0 04                A   200    	DB	4
000000C1 00                A   201    	DB	0
000000C2 04                A   202    	DB	4
000000C3 08                A   203    	DB	8
000000C4 01                A   204    	DB	1
000000C5 02                A   205    	DB	2
000000C6 04                A   206    	DB	4
000000C7 08                A   207    	DB	8
000000C8 04                A   208    	DB	4
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   5


PC     Object              I  Line    Source led_interrupts.src
000000C9 02                A   209    	DB	2
000000CA 01                A   210    	DB	1
000000CB 00                A   211    	DB	0
000000CC 00                A   212    	DB	0
000000CD 1F                A   213    	DB	31
000000CE 00                A   214    	DB	0
000000CF 1F                A   215    	DB	31
000000D0 00                A   216    	DB	0
000000D1 00                A   217    	DB	0
000000D2 10                A   218    	DB	16
000000D3 08                A   219    	DB	8
000000D4 04                A   220    	DB	4
000000D5 02                A   221    	DB	2
000000D6 04                A   222    	DB	4
000000D7 08                A   223    	DB	8
000000D8 10                A   224    	DB	16
000000D9 0E                A   225    	DB	14
000000DA 11                A   226    	DB	17
000000DB 02                A   227    	DB	2
000000DC 04                A   228    	DB	4
000000DD 04                A   229    	DB	4
000000DE 00                A   230    	DB	0
000000DF 04                A   231    	DB	4
000000E0 0E                A   232    	DB	14
000000E1 11                A   233    	DB	17
000000E2 15                A   234    	DB	21
000000E3 15                A   235    	DB	21
000000E4 17                A   236    	DB	23
000000E5 10                A   237    	DB	16
000000E6 0F                A   238    	DB	15
000000E7 04                A   239    	DB	4
000000E8 0A                A   240    	DB	10
000000E9 11                A   241    	DB	17
000000EA 11                A   242    	DB	17
000000EB 1F                A   243    	DB	31
000000EC 11                A   244    	DB	17
000000ED 11                A   245    	DB	17
000000EE 1E                A   246    	DB	30
000000EF 11                A   247    	DB	17
000000F0 11                A   248    	DB	17
000000F1 1E                A   249    	DB	30
000000F2 11                A   250    	DB	17
000000F3 11                A   251    	DB	17
000000F4 1F                A   252    	DB	31
000000F5 0E                A   253    	DB	14
000000F6 11                A   254    	DB	17
000000F7 10                A   255    	DB	16
000000F8 10                A   256    	DB	16
000000F9 10                A   257    	DB	16
000000FA 11                A   258    	DB	17
000000FB 0E                A   259    	DB	14
000000FC 1E                A   260    	DB	30
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   6


PC     Object              I  Line    Source led_interrupts.src
000000FD 11                A   261    	DB	17
000000FE 11                A   262    	DB	17
000000FF 11                A   263    	DB	17
00000100 11                A   264    	DB	17
00000101 11                A   265    	DB	17
00000102 1F                A   266    	DB	31
00000103 1F                A   267    	DB	31
00000104 10                A   268    	DB	16
00000105 10                A   269    	DB	16
00000106 1C                A   270    	DB	28
00000107 10                A   271    	DB	16
00000108 10                A   272    	DB	16
00000109 1F                A   273    	DB	31
0000010A 1F                A   274    	DB	31
0000010B 10                A   275    	DB	16
0000010C 10                A   276    	DB	16
0000010D 1C                A   277    	DB	28
0000010E 10                A   278    	DB	16
0000010F 10                A   279    	DB	16
00000110 10                A   280    	DB	16
00000111 0E                A   281    	DB	14
00000112 11                A   282    	DB	17
00000113 10                A   283    	DB	16
00000114 17                A   284    	DB	23
00000115 11                A   285    	DB	17
00000116 11                A   286    	DB	17
00000117 0E                A   287    	DB	14
00000118 11                A   288    	DB	17
00000119 11                A   289    	DB	17
0000011A 11                A   290    	DB	17
0000011B 1F                A   291    	DB	31
0000011C 11                A   292    	DB	17
0000011D 11                A   293    	DB	17
0000011E 11                A   294    	DB	17
0000011F 1F                A   295    	DB	31
00000120 04                A   296    	DB	4
00000121 04                A   297    	DB	4
00000122 04                A   298    	DB	4
00000123 04                A   299    	DB	4
00000124 04                A   300    	DB	4
00000125 1F                A   301    	DB	31
00000126 1F                A   302    	DB	31
00000127 02                A   303    	DB	2
00000128 02                A   304    	DB	2
00000129 02                A   305    	DB	2
0000012A 02                A   306    	DB	2
0000012B 12                A   307    	DB	18
0000012C 0C                A   308    	DB	12
0000012D 11                A   309    	DB	17
0000012E 12                A   310    	DB	18
0000012F 14                A   311    	DB	20
00000130 18                A   312    	DB	24
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   7


PC     Object              I  Line    Source led_interrupts.src
00000131 14                A   313    	DB	20
00000132 12                A   314    	DB	18
00000133 11                A   315    	DB	17
00000134 10                A   316    	DB	16
00000135 10                A   317    	DB	16
00000136 10                A   318    	DB	16
00000137 10                A   319    	DB	16
00000138 10                A   320    	DB	16
00000139 10                A   321    	DB	16
0000013A 1F                A   322    	DB	31
0000013B 11                A   323    	DB	17
0000013C 1B                A   324    	DB	27
0000013D 15                A   325    	DB	21
0000013E 11                A   326    	DB	17
0000013F 11                A   327    	DB	17
00000140 11                A   328    	DB	17
00000141 11                A   329    	DB	17
00000142 11                A   330    	DB	17
00000143 11                A   331    	DB	17
00000144 19                A   332    	DB	25
00000145 15                A   333    	DB	21
00000146 13                A   334    	DB	19
00000147 11                A   335    	DB	17
00000148 11                A   336    	DB	17
00000149 0E                A   337    	DB	14
0000014A 11                A   338    	DB	17
0000014B 11                A   339    	DB	17
0000014C 11                A   340    	DB	17
0000014D 11                A   341    	DB	17
0000014E 11                A   342    	DB	17
0000014F 0E                A   343    	DB	14
00000150 1E                A   344    	DB	30
00000151 11                A   345    	DB	17
00000152 11                A   346    	DB	17
00000153 1E                A   347    	DB	30
00000154 10                A   348    	DB	16
00000155 10                A   349    	DB	16
00000156 10                A   350    	DB	16
00000157 0E                A   351    	DB	14
00000158 11                A   352    	DB	17
00000159 11                A   353    	DB	17
0000015A 11                A   354    	DB	17
0000015B 15                A   355    	DB	21
0000015C 12                A   356    	DB	18
0000015D 0D                A   357    	DB	13
0000015E 1E                A   358    	DB	30
0000015F 11                A   359    	DB	17
00000160 11                A   360    	DB	17
00000161 1E                A   361    	DB	30
00000162 14                A   362    	DB	20
00000163 12                A   363    	DB	18
00000164 11                A   364    	DB	17
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   8


PC     Object              I  Line    Source led_interrupts.src
00000165 0E                A   365    	DB	14
00000166 11                A   366    	DB	17
00000167 10                A   367    	DB	16
00000168 0E                A   368    	DB	14
00000169 01                A   369    	DB	1
0000016A 11                A   370    	DB	17
0000016B 0E                A   371    	DB	14
0000016C 1F                A   372    	DB	31
0000016D 04                A   373    	DB	4
0000016E 04                A   374    	DB	4
0000016F 04                A   375    	DB	4
00000170 04                A   376    	DB	4
00000171 04                A   377    	DB	4
00000172 04                A   378    	DB	4
00000173 11                A   379    	DB	17
00000174 11                A   380    	DB	17
00000175 11                A   381    	DB	17
00000176 11                A   382    	DB	17
00000177 11                A   383    	DB	17
00000178 11                A   384    	DB	17
00000179 0E                A   385    	DB	14
0000017A 11                A   386    	DB	17
0000017B 11                A   387    	DB	17
0000017C 11                A   388    	DB	17
0000017D 11                A   389    	DB	17
0000017E 11                A   390    	DB	17
0000017F 0A                A   391    	DB	10
00000180 04                A   392    	DB	4
00000181 11                A   393    	DB	17
00000182 11                A   394    	DB	17
00000183 11                A   395    	DB	17
00000184 11                A   396    	DB	17
00000185 15                A   397    	DB	21
00000186 1B                A   398    	DB	27
00000187 11                A   399    	DB	17
00000188 11                A   400    	DB	17
00000189 11                A   401    	DB	17
0000018A 0A                A   402    	DB	10
0000018B 04                A   403    	DB	4
0000018C 0A                A   404    	DB	10
0000018D 11                A   405    	DB	17
0000018E 11                A   406    	DB	17
0000018F 11                A   407    	DB	17
00000190 11                A   408    	DB	17
00000191 0A                A   409    	DB	10
00000192 04                A   410    	DB	4
00000193 04                A   411    	DB	4
00000194 04                A   412    	DB	4
00000195 04                A   413    	DB	4
00000196 1F                A   414    	DB	31
00000197 11                A   415    	DB	17
00000198 02                A   416    	DB	2
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:   9


PC     Object              I  Line    Source led_interrupts.src
00000199 04                A   417    	DB	4
0000019A 08                A   418    	DB	8
0000019B 11                A   419    	DB	17
0000019C 1F                A   420    	DB	31
0000019D 0E                A   421    	DB	14
0000019E 08                A   422    	DB	8
0000019F 08                A   423    	DB	8
000001A0 08                A   424    	DB	8
000001A1 08                A   425    	DB	8
000001A2 08                A   426    	DB	8
000001A3 0E                A   427    	DB	14
000001A4 00                A   428    	DB	0
000001A5 10                A   429    	DB	16
000001A6 08                A   430    	DB	8
000001A7 04                A   431    	DB	4
000001A8 02                A   432    	DB	2
000001A9 01                A   433    	DB	1
000001AA 00                A   434    	DB	0
000001AB 0E                A   435    	DB	14
000001AC 02                A   436    	DB	2
000001AD 02                A   437    	DB	2
000001AE 02                A   438    	DB	2
000001AF 02                A   439    	DB	2
000001B0 02                A   440    	DB	2
000001B1 0E                A   441    	DB	14
000001B2 04                A   442    	DB	4
000001B3 0A                A   443    	DB	10
000001B4 11                A   444    	DB	17
000001B5 00                A   445    	DB	0
000001B6 00                A   446    	DB	0
000001B7 00                A   447    	DB	0
000001B8 00                A   448    	DB	0
000001B9 00                A   449    	DB	0
000001BA 00                A   450    	DB	0
000001BB 00                A   451    	DB	0
000001BC 00                A   452    	DB	0
000001BD 00                A   453    	DB	0
000001BE 00                A   454    	DB	0
000001BF 1F                A   455    	DB	31
000001C0 08                A   456    	DB	8
000001C1 04                A   457    	DB	4
000001C2 00                A   458    	DB	0
000001C3 00                A   459    	DB	0
000001C4 00                A   460    	DB	0
000001C5 00                A   461    	DB	0
000001C6 00                A   462    	DB	0
000001C7 00                A   463    	DB	0
000001C8 00                A   464    	DB	0
000001C9 00                A   465    	DB	0
000001CA 0C                A   466    	DB	12
000001CB 12                A   467    	DB	18
000001CC 12                A   468    	DB	18
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  10


PC     Object              I  Line    Source led_interrupts.src
000001CD 0D                A   469    	DB	13
000001CE 00                A   470    	DB	0
000001CF 10                A   471    	DB	16
000001D0 10                A   472    	DB	16
000001D1 1E                A   473    	DB	30
000001D2 11                A   474    	DB	17
000001D3 11                A   475    	DB	17
000001D4 1E                A   476    	DB	30
000001D5 00                A   477    	DB	0
000001D6 00                A   478    	DB	0
000001D7 00                A   479    	DB	0
000001D8 0F                A   480    	DB	15
000001D9 10                A   481    	DB	16
000001DA 10                A   482    	DB	16
000001DB 0F                A   483    	DB	15
000001DC 00                A   484    	DB	0
000001DD 01                A   485    	DB	1
000001DE 01                A   486    	DB	1
000001DF 0F                A   487    	DB	15
000001E0 11                A   488    	DB	17
000001E1 11                A   489    	DB	17
000001E2 0F                A   490    	DB	15
000001E3 00                A   491    	DB	0
000001E4 00                A   492    	DB	0
000001E5 0E                A   493    	DB	14
000001E6 11                A   494    	DB	17
000001E7 1E                A   495    	DB	30
000001E8 10                A   496    	DB	16
000001E9 0F                A   497    	DB	15
000001EA 06                A   498    	DB	6
000001EB 09                A   499    	DB	9
000001EC 08                A   500    	DB	8
000001ED 1E                A   501    	DB	30
000001EE 08                A   502    	DB	8
000001EF 08                A   503    	DB	8
000001F0 08                A   504    	DB	8
000001F1 00                A   505    	DB	0
000001F2 0E                A   506    	DB	14
000001F3 11                A   507    	DB	17
000001F4 11                A   508    	DB	17
000001F5 0F                A   509    	DB	15
000001F6 01                A   510    	DB	1
000001F7 0E                A   511    	DB	14
000001F8 00                A   512    	DB	0
000001F9 10                A   513    	DB	16
000001FA 10                A   514    	DB	16
000001FB 1E                A   515    	DB	30
000001FC 11                A   516    	DB	17
000001FD 11                A   517    	DB	17
000001FE 11                A   518    	DB	17
000001FF 00                A   519    	DB	0
00000200 00                A   520    	DB	0
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  11


PC     Object              I  Line    Source led_interrupts.src
00000201 04                A   521    	DB	4
00000202 00                A   522    	DB	0
00000203 04                A   523    	DB	4
00000204 04                A   524    	DB	4
00000205 04                A   525    	DB	4
00000206 00                A   526    	DB	0
00000207 02                A   527    	DB	2
00000208 02                A   528    	DB	2
00000209 02                A   529    	DB	2
0000020A 02                A   530    	DB	2
0000020B 12                A   531    	DB	18
0000020C 0C                A   532    	DB	12
0000020D 00                A   533    	DB	0
0000020E 11                A   534    	DB	17
0000020F 12                A   535    	DB	18
00000210 1C                A   536    	DB	28
00000211 14                A   537    	DB	20
00000212 12                A   538    	DB	18
00000213 11                A   539    	DB	17
00000214 00                A   540    	DB	0
00000215 08                A   541    	DB	8
00000216 08                A   542    	DB	8
00000217 08                A   543    	DB	8
00000218 08                A   544    	DB	8
00000219 08                A   545    	DB	8
0000021A 08                A   546    	DB	8
0000021B 00                A   547    	DB	0
0000021C 00                A   548    	DB	0
0000021D 00                A   549    	DB	0
0000021E 11                A   550    	DB	17
0000021F 1B                A   551    	DB	27
00000220 15                A   552    	DB	21
00000221 11                A   553    	DB	17
00000222 00                A   554    	DB	0
00000223 00                A   555    	DB	0
00000224 00                A   556    	DB	0
00000225 16                A   557    	DB	22
00000226 19                A   558    	DB	25
00000227 11                A   559    	DB	17
00000228 11                A   560    	DB	17
00000229 00                A   561    	DB	0
0000022A 00                A   562    	DB	0
0000022B 00                A   563    	DB	0
0000022C 0E                A   564    	DB	14
0000022D 11                A   565    	DB	17
0000022E 11                A   566    	DB	17
0000022F 0E                A   567    	DB	14
00000230 00                A   568    	DB	0
00000231 0E                A   569    	DB	14
00000232 09                A   570    	DB	9
00000233 09                A   571    	DB	9
00000234 0E                A   572    	DB	14
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  12


PC     Object              I  Line    Source led_interrupts.src
00000235 08                A   573    	DB	8
00000236 08                A   574    	DB	8
00000237 00                A   575    	DB	0
00000238 0E                A   576    	DB	14
00000239 11                A   577    	DB	17
0000023A 0E                A   578    	DB	14
0000023B 02                A   579    	DB	2
0000023C 02                A   580    	DB	2
0000023D 01                A   581    	DB	1
0000023E 00                A   582    	DB	0
0000023F 00                A   583    	DB	0
00000240 08                A   584    	DB	8
00000241 0E                A   585    	DB	14
00000242 08                A   586    	DB	8
00000243 08                A   587    	DB	8
00000244 08                A   588    	DB	8
00000245 00                A   589    	DB	0
00000246 00                A   590    	DB	0
00000247 07                A   591    	DB	7
00000248 08                A   592    	DB	8
00000249 06                A   593    	DB	6
0000024A 01                A   594    	DB	1
0000024B 0E                A   595    	DB	14
0000024C 00                A   596    	DB	0
0000024D 00                A   597    	DB	0
0000024E 04                A   598    	DB	4
0000024F 0E                A   599    	DB	14
00000250 04                A   600    	DB	4
00000251 04                A   601    	DB	4
00000252 04                A   602    	DB	4
00000253 00                A   603    	DB	0
00000254 00                A   604    	DB	0
00000255 00                A   605    	DB	0
00000256 11                A   606    	DB	17
00000257 11                A   607    	DB	17
00000258 11                A   608    	DB	17
00000259 0E                A   609    	DB	14
0000025A 00                A   610    	DB	0
0000025B 00                A   611    	DB	0
0000025C 00                A   612    	DB	0
0000025D 11                A   613    	DB	17
0000025E 11                A   614    	DB	17
0000025F 0A                A   615    	DB	10
00000260 04                A   616    	DB	4
00000261 00                A   617    	DB	0
00000262 00                A   618    	DB	0
00000263 00                A   619    	DB	0
00000264 11                A   620    	DB	17
00000265 15                A   621    	DB	21
00000266 1B                A   622    	DB	27
00000267 11                A   623    	DB	17
00000268 00                A   624    	DB	0
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  13


PC     Object              I  Line    Source led_interrupts.src
00000269 00                A   625    	DB	0
0000026A 11                A   626    	DB	17
0000026B 0A                A   627    	DB	10
0000026C 04                A   628    	DB	4
0000026D 0A                A   629    	DB	10
0000026E 11                A   630    	DB	17
0000026F 00                A   631    	DB	0
00000270 00                A   632    	DB	0
00000271 11                A   633    	DB	17
00000272 0A                A   634    	DB	10
00000273 04                A   635    	DB	4
00000274 04                A   636    	DB	4
00000275 04                A   637    	DB	4
00000276 00                A   638    	DB	0
00000277 00                A   639    	DB	0
00000278 1F                A   640    	DB	31
00000279 02                A   641    	DB	2
0000027A 04                A   642    	DB	4
0000027B 08                A   643    	DB	8
0000027C 1F                A   644    	DB	31
0000027D 06                A   645    	DB	6
0000027E 08                A   646    	DB	8
0000027F 08                A   647    	DB	8
00000280 10                A   648    	DB	16
00000281 08                A   649    	DB	8
00000282 08                A   650    	DB	8
00000283 06                A   651    	DB	6
00000284 04                A   652    	DB	4
00000285 04                A   653    	DB	4
00000286 04                A   654    	DB	4
00000287 04                A   655    	DB	4
00000288 04                A   656    	DB	4
00000289 04                A   657    	DB	4
0000028A 04                A   658    	DB	4
0000028B 0C                A   659    	DB	12
0000028C 02                A   660    	DB	2
0000028D 02                A   661    	DB	2
0000028E 01                A   662    	DB	1
0000028F 02                A   663    	DB	2
00000290 02                A   664    	DB	2
00000291 0C                A   665    	DB	12
00000292 00                A   666    	DB	0
00000293 0A                A   667    	DB	10
00000294 15                A   668    	DB	21
00000295 00                A   669    	DB	0
00000296 00                A   670    	DB	0
00000297 00                A   671    	DB	0
00000298 00                A   672    	DB	0
                           A   673    .define "char_data"
                           A   674    .alias "_char_data"
                           A   675    .class 133
                           A   676    .value _char_data
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  14


PC     Object              I  Line    Source led_interrupts.src
                           A   677    .dim 95
                           A   678    .dim 7
                           A   679    .type 876
                           A   680    .type 0
                           A   681    .endef
                           A   682    	SEGMENT NEAR_BSS
00000000                   A   683    _led_msg:
00000000                   A   684    	DS	2*1
                           A   685    .define "led_msg"
                           A   686    .alias "_led_msg"
                           A   687    .class 147
                           A   688    .value _led_msg
                           A   689    .type 140
                           A   690    .type 0
                           A   691    .endef
                           A   692    	SEGMENT CODE
                           A   693    .begrec "fmt_type",16
                           A   694    .define "status"
                           A   695    .value 0
                           A   696    .class 8
                           A   697    .type 12
                           A   698    .type 0
                           A   699    .endef
                           A   700    .define "flags"
                           A   701    .value 1
                           A   702    .class 8
                           A   703    .type 12
                           A   704    .type 0
                           A   705    .endef
                           A   706    .define "size"
                           A   707    .value 2
                           A   708    .class 8
                           A   709    .type 12
                           A   710    .type 0
                           A   711    .endef
                           A   712    .define "chr"
                           A   713    .value 3
                           A   714    .class 8
                           A   715    .type 12
                           A   716    .type 0
                           A   717    .endef
                           A   718    .define "type"
                           A   719    .value 4
                           A   720    .class 8
                           A   721    .type 12
                           A   722    .type 0
                           A   723    .endef
                           A   724    .define "field_width"
                           A   725    .value 5
                           A   726    .class 8
                           A   727    .type 2
                           A   728    .type 0
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  15


PC     Object              I  Line    Source led_interrupts.src
                           A   729    .endef
                           A   730    .define "precision"
                           A   731    .value 6
                           A   732    .class 8
                           A   733    .type 2
                           A   734    .type 0
                           A   735    .endef
                           A   736    .define "set_begin"
                           A   737    .value 7
                           A   738    .class 8
                           A   739    .type 140
                           A   740    .type 0
                           A   741    .endef
                           A   742    .define "set_end"
                           A   743    .value 9
                           A   744    .class 8
                           A   745    .type 140
                           A   746    .type 0
                           A   747    .endef
                           A   748    .define "pad_whole"
                           A   749    .value 11
                           A   750    .class 8
                           A   751    .type 12
                           A   752    .type 0
                           A   753    .endef
                           A   754    .define "pad_pre_fract"
                           A   755    .value 12
                           A   756    .class 8
                           A   757    .type 12
                           A   758    .type 0
                           A   759    .endef
                           A   760    .define "pad_post_fract"
                           A   761    .value 13
                           A   762    .class 8
                           A   763    .type 12
                           A   764    .type 0
                           A   765    .endef
                           A   766    .define "pad_at"
                           A   767    .value 14
                           A   768    .class 8
                           A   769    .type 140
                           A   770    .type 0
                           A   771    .endef
                           A   772    .endrec "fmt_type"
                           A   773    .begrec "flt_info",12
                           A   774    .define "flags"
                           A   775    .value 0
                           A   776    .class 8
                           A   777    .type 12
                           A   778    .type 0
                           A   779    .endef
                           A   780    .define "exp"
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  16


PC     Object              I  Line    Source led_interrupts.src
                           A   781    .value 1
                           A   782    .class 8
                           A   783    .type 2
                           A   784    .type 0
                           A   785    .endef
                           A   786    .define "digits"
                           A   787    .value 2
                           A   788    .class 8
                           A   789    .dim 10
                           A   790    .type 108
                           A   791    .type 0
                           A   792    .endef
                           A   793    .endrec "flt_info"
                           A   794    	SEGMENT NEAR_BSS
00000002                   A   795    _msg_size:
00000002                   A   796    	DS	4*1
                           A   797    .define "msg_size"
                           A   798    .alias "_msg_size"
                           A   799    .class 147
                           A   800    .value _msg_size
                           A   801    .type 15
                           A   802    .type 0
                           A   803    .endef
00000006                   A   804    _draw_char:
00000006                   A   805    	DS	16
                           A   806    .define "draw_char"
                           A   807    .alias "_draw_char"
                           A   808    .class 147
                           A   809    .value _draw_char
                           A   810    .dim 4
                           A   811    .type 111
                           A   812    .type 0
                           A   813    .endef
00000016                   A   814    _msg_pos:
00000016                   A   815    	DS	4*1
                           A   816    .define "msg_pos"
                           A   817    .alias "_msg_pos"
                           A   818    .class 147
                           A   819    .value _msg_pos
                           A   820    .type 15
                           A   821    .type 0
                           A   822    .endef
0000001A                   A   823    _row_pos:
0000001A                   A   824    	DS	4*1
                           A   825    .define "row_pos"
                           A   826    .alias "_row_pos"
                           A   827    .class 147
                           A   828    .value _row_pos
                           A   829    .type 15
                           A   830    .type 0
                           A   831    .endef
0000001E                   A   832    _led_state:
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  17


PC     Object              I  Line    Source led_interrupts.src
0000001E                   A   833    	DS	4*1
                           A   834    .define "led_state"
                           A   835    .alias "_led_state"
                           A   836    .class 147
                           A   837    .value _led_state
                           A   838    .type 15
                           A   839    .type 0
                           A   840    .endef
00000022                   A   841    _uptime_state:
00000022                   A   842    	DS	4*1
                           A   843    .define "uptime_state"
                           A   844    .alias "_uptime_state"
                           A   845    .class 147
                           A   846    .value _uptime_state
                           A   847    .type 15
                           A   848    .type 0
                           A   849    .endef
00000026                   A   850    _uptime:
00000026                   A   851    	DS 4*1
                           A   852    .define "uptime"
                           A   853    .alias "_uptime"
                           A   854    .class 147
                           A   855    .value _uptime
                           A   856    .type 6
                           A   857    .type 0
                           A   858    .endef
0000002A                   A   859    _timer:
0000002A                   A   860    	DS 4*1
                           A   861    .define "timer"
                           A   862    .alias "_timer"
                           A   863    .class 147
                           A   864    .value _timer
                           A   865    .type 6
                           A   866    .type 0
                           A   867    .endef
0000002E                   A   868    _timer_cutoff:
0000002E                   A   869    	DS 4*1
                           A   870    .define "timer_cutoff"
                           A   871    .alias "_timer_cutoff"
                           A   872    .class 147
                           A   873    .value _timer_cutoff
                           A   874    .type 6
                           A   875    .type 0
                           A   876    .endef
                           A   877    	SEGMENT NEAR_DATA
00000299                   A   878    _led_anode:
00000299 00000001          A   879    	DL	1
0000029D 00000002          A   880    	DL	2
000002A1 00000004          A   881    	DL	4
000002A5 00000008          A   882    	DL	8
000002A9 00000010          A   883    	DL	16
000002AD 00000020          A   884    	DL	32
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  18


PC     Object              I  Line    Source led_interrupts.src
000002B1 00000040          A   885    	DL	64
                           A   886    .define "led_anode"
                           A   887    .alias "_led_anode"
                           A   888    .class 133
                           A   889    .value _led_anode
                           A   890    .dim 7
                           A   891    .type 111
                           A   892    .type 0
                           A   893    .endef
                           A   894    ;    1	#include "timer.h"
                           A   895    ;    2	#include "buttons.h"
                           A   896    ;    3	#include "matrix.h"
                           A   897    ;    4	#include "LED.h"
                           A   898    ;    5	#include "LED_interrupts.h"
                           A   899    ;    6	
                           A   900    ;    7	#include <zneo.h>
                           A   901    ;    8	#include <stdio.h>
                           A   902    ;    9	#include <string.h>
                           A   903    ;   10	
                           A   904    ;   11	#define LED_DEC_MAX  9999
                           A   905    ;   12	#define LED_HEX_MAX  0xFFFF
                           A   906    ;   13	
                           A   907    ;   14	#define NUM_ANODES   7
                           A   908    ;   15	#define D1           0
                           A   909    ;   16	#define D2           1
                           A   910    ;   17	#define D3           2
                           A   911    ;   18	#define D4           3
                           A   912    ;   19	
                           A   913    ;   20	unsigned char *led_msg;
                           A   914    ;   21	size_t msg_size;
                           A   915    ;   22	
                           A   916    ;   23	unsigned int draw_char[NUM_LEDS];
                           A   917    ;   24	unsigned int msg_pos;
                           A   918    ;   25	unsigned int row_pos;
                           A   919    ;   26	unsigned int led_state;
                           A   920    ;   27	unsigned int uptime_state;
                           A   921    ;   28	
                           A   922    ;   29	float uptime;
                           A   923    ;   30	float timer;
                           A   924    ;   31	float timer_cutoff;
                           A   925    ;   32	
                           A   926    ;   33	extern float button_timer;
                           A   927    ;   34	extern float debounce_cutoff;
                           A   928    ;   35	
                           A   929    ;   36	extern float button_twice_timer;
                           A   930    ;   37	extern float button_twice_cutoff;
                           A   931    ;   38	
                           A   932    ;   39	extern unsigned char last_button;
                           A   933    ;   40	
                           A   934    ;   41	//values for selecting each LED row
                           A   935    ;   42	static unsigned int led_anode[NUM_ANODES] =
                           A   936    ;   43	{
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  19


PC     Object              I  Line    Source led_interrupts.src
                           A   937    	SEGMENT CODE
                           A   938    ;   44		0x01,
                           A   939    ;   45		0x02,
                           A   940    ;   46		0x04,
                           A   941    ;   47		0x08,
                           A   942    ;   48		0x10,
                           A   943    ;   49		0x20,
                           A   944    ;   50		0x40
                           A   945    ;   51	};
                           A   946    ;   52	
                           A   947    ;   53	static void led_draw(unsigned int led_id);
                           A   948    ;   54	static void init_led_draw_timer(void);
                           A   949    ;   55	
                           A   950    ;   56	void init_led_timers(void)
                           A   951    ;   57	{
00000000                   A   952    _init_led_timers:
                           A   953    .define "_init_led_timers"
                           A   954    .value _init_led_timers
                           A   955    .class 2
                           A   956    .type 65
                           A   957    .type 0
                           A   958    .endef
                           A   959    .begfunc "init_led_timers",57,"_init_led_timers"
00000000 0800              A   960    	LINK	#0
                           A   961    ;   58		// unlock the oscillator control register
                           A   962    ;   59		OSCCTL = 0xE7; OSCCTL = 0x18;
                           A   963    .line 59
00000002 4500 00E7         A   964    	LD	R0,#231
00000006 0350 E0A0         A   965    	LD.B	57504:RAM,R0
0000000A 3018              A   966    	LD	R0,#24
0000000C 0350 E0A0         A   967    	LD.B	57504:RAM,R0
                           A   968    ;   60	
                           A   969    ;   61		// A0 = 1010_0000 = internal 5.52 MHz
                           A   970    ;   62		OSCCTL = 0xA0;
                           A   971    .line 62
00000010 4500 00A0         A   972    	LD	R0,#160
00000014 0350 E0A0         A   973    	LD.B	57504:RAM,R0
                           A   974    ;   63	
                           A   975    ;   64		//setup timing variables
                           A   976    ;   65		timer = 0;
                           A   977    .line 65
00000018 ADA8 002A         A   978    	CLR	_timer:RAM
                           A   979    ;   66		uptime = 0;
                           A   980    .line 66
0000001C ADA8 0026         A   981    	CLR	_uptime:RAM
                           A   982    ;   67		timer_cutoff = SCROLL_CUTOFF;
                           A   983    .line 67
00000020 4520 3ECCCCCD     A   984    	LD	R0,#1053609165
00000026 0370 002E         A   985    	LD	_timer_cutoff:RAM,R0
                           A   986    ;   68	
                           A   987    ;   69		button_timer = 0;
                           A   988    .line 69
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  20


PC     Object              I  Line    Source led_interrupts.src
0000002A ADA8 0000         A   989    	CLR	_button_timer:RAM
                           A   990    ;   70		debounce_cutoff = DEBOUNCE_CUTOFF;
                           A   991    .line 70
0000002E 4520 3D23D70A     A   992    	LD	R0,#1025758986
00000034 0370 0000         A   993    	LD	_debounce_cutoff:RAM,R0
                           A   994    ;   71	
                           A   995    ;   72		button_twice_timer = 0;
                           A   996    .line 72
00000038 ADA8 0000         A   997    	CLR	_button_twice_timer:RAM
                           A   998    ;   73		button_twice_cutoff = BUTTON_TWICE_CUTOFF;
                           A   999    .line 73
0000003C 4520 3F000000     A  1000    	LD	R0,#1056964608
00000042 0370 0000         A  1001    	LD	_button_twice_cutoff:RAM,R0
                           A  1002    ;   74	
                           A  1003    ;   75		//set LED display defaults
                           A  1004    ;   76		led_state = LED_TEXT;
                           A  1005    .line 76
00000046 ADA8 001E         A  1006    	CLR	_led_state:RAM
                           A  1007    ;   77		uptime_state = UPTIME_DEC;
                           A  1008    .line 77
0000004A ADA8 0022         A  1009    	CLR	_uptime_state:RAM
                           A  1010    ;   78		led_msg = NULL;
                           A  1011    .line 78
0000004E ADA4 0000         A  1012    	CLR.W	_led_msg:RAM
                           A  1013    ;   79	
                           A  1014    ;   80		msg_size = 0;
                           A  1015    .line 80
00000052 ADA8 0002         A  1016    	CLR	_msg_size:RAM
                           A  1017    ;   81		draw_char[0] = ASCII_SPACE;
                           A  1018    .line 81
00000056 ADA8 0006         A  1019    	CLR	_draw_char:RAM
                           A  1020    ;   82		draw_char[1] = ASCII_SPACE;
                           A  1021    .line 82
0000005A ADA8 000A         A  1022    	CLR	_draw_char+4:RAM
                           A  1023    ;   83		draw_char[2] = ASCII_SPACE;
                           A  1024    .line 83
0000005E ADA8 000E         A  1025    	CLR	_draw_char+8:RAM
                           A  1026    ;   84		draw_char[3] = ASCII_SPACE;
                           A  1027    .line 84
00000062 ADA8 0012         A  1028    	CLR	_draw_char+12:RAM
                           A  1029    ;   85	
                           A  1030    ;   86		init_led_draw_timer();
                           A  1031    .line 86
00000066 D135              A  1032    	CALL	_init_led_draw_timer
                           A  1033    ;   87	}
                           A  1034    .line 87
00000068 0001              A  1035    	UNLINK	
0000006A FFFC              A  1036    	RET	
                           A  1037    
                           A  1038    
                           A  1039    ;**************************** _init_led_timers ***************************
                           A  1040    ;Name                         Addr/Register   Size   Type
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  21


PC     Object              I  Line    Source led_interrupts.src
                           A  1041    ;_init_led_draw_timer                STATIC  -----   function
                           A  1042    ;_draw_char                          STATIC     16   variable
                           A  1043    ;_msg_size                           STATIC      4   variable
                           A  1044    ;_led_msg                            STATIC      2   variable
                           A  1045    ;_uptime_state                       STATIC      4   variable
                           A  1046    ;_led_state                          STATIC      4   variable
                           A  1047    ;_button_twice_cutoff                IMPORT      4   variable
                           A  1048    ;_button_twice_timer                 IMPORT      4   variable
                           A  1049    ;_debounce_cutoff                    IMPORT      4   variable
                           A  1050    ;_button_timer                       IMPORT      4   variable
                           A  1051    ;_timer_cutoff                       STATIC      4   variable
                           A  1052    ;_uptime                             STATIC      4   variable
                           A  1053    ;_timer                              STATIC      4   variable
                           A  1054    
                           A  1055    
                           A  1056    ; Aggregate Stack Size: 0 (words)
                           A  1057    
                           A  1058    
                           A  1059    .endfunc "init_led_timers",87,"_init_led_timers"
                           A  1060    ;   88	
                           A  1061    ;   89	/*
                           A  1062    ;   90		Interrupt for updating the LED.
                           A  1063    ;   91	
                           A  1064    ;   92		This interrupt also handles button events via timed
                           A  1065    ;   93		polling.
                           A  1066    ;   94	 */
                           A  1067    ;   95	void interrupt draw_timer_isr(void)
                           A  1068    ;   96	{
0000006C                   A  1069    _draw_timer_isr:
                           A  1070    .define "_draw_timer_isr"
                           A  1071    .value _draw_timer_isr
                           A  1072    .class 2
                           A  1073    .type 65
                           A  1074    .type 0
                           A  1075    .endef
                           A  1076    .begfunc "draw_timer_isr",96,"_draw_timer_isr"
                           A  1077    .line 96
                           A  1078    .define "led_uptime"
                           A  1079    .class 4
                           A  1080    .reg 9
                           A  1081    .type 15
                           A  1082    .type 0
                           A  1083    .endef
0000006C 0800              A  1084    	LINK	#0
0000006E 04FF              A  1085    	PUSHMLO	#255
00000070 05C0              A  1086    	PUSHMHI	#3
                           A  1087    ;   97		unsigned int led_uptime;
                           A  1088    ;   98	
                           A  1089    ;   99		//increment timers
                           A  1090    ;  100		timer += DRAW_TIME;
                           A  1091    .line 100
00000072 0348 002A         A  1092    	LD	R8,_timer:RAM
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  22


PC     Object              I  Line    Source led_interrupts.src
00000076 4529 3B03126F     A  1093    	LD	R9,#990057071
0000007C F1 FFFFC0         A  1094    	CALL	__fpadd
00000080 0370 002A         A  1095    	LD	_timer:RAM,R0
                           A  1096    ;  101		uptime += DRAW_TIME;
                           A  1097    .line 101
00000084 0348 0026         A  1098    	LD	R8,_uptime:RAM
00000088 4529 3B03126F     A  1099    	LD	R9,#990057071
0000008E F1 FFFFB7         A  1100    	CALL	__fpadd
00000092 0370 0026         A  1101    	LD	_uptime:RAM,R0
                           A  1102    ;  102		button_timer += DRAW_TIME;
                           A  1103    .line 102
00000096 0348 0000         A  1104    	LD	R8,_button_timer:RAM
0000009A 4529 3B03126F     A  1105    	LD	R9,#990057071
000000A0 F1 FFFFAE         A  1106    	CALL	__fpadd
000000A4 0370 0000         A  1107    	LD	_button_timer:RAM,R0
                           A  1108    ;  103	
                           A  1109    ;  104		if(button_twice_timer >= button_twice_cutoff) {
                           A  1110    .line 104
000000A8 0349 0000         A  1111    	LD	R9,_button_twice_cutoff:RAM
000000AC 0348 0000         A  1112    	LD	R8,_button_twice_timer:RAM
000000B0 F1 FFFFA6         A  1113    	CALL	__fpcmp
000000B4 E1 07             A  1114    	JP	LT,_2_L_3
                           A  1115    ;  105			button_twice_timer = 0;
                           A  1116    .line 105
000000B6 ADA8 0000         A  1117    	CLR	_button_twice_timer:RAM
                           A  1118    ;  106			last_button = BUTTON_NONE;
                           A  1119    .line 106
000000BA 4500 00C8         A  1120    	LD	R0,#200
000000BE 0350 0000         A  1121    	LD.B	_last_button:RAM,R0
                           A  1122    ;  107		}
                           A  1123    ;  108		else if(button_twice_timer > 0) {
                           A  1124    .line 108
000000C2 C00F              A  1125    	JP	_2_L_32
000000C4                   A  1126    _2_L_3:
000000C4 3900              A  1127    	LD	R9,#0
000000C6 0348 0000         A  1128    	LD	R8,_button_twice_timer:RAM
000000CA F1 FFFF99         A  1129    	CALL	__fpcmp
000000CE E2 09             A  1130    	JP	LE,_2_L_32
                           A  1131    ;  109			button_twice_timer += DRAW_TIME;
                           A  1132    .line 109
000000D0 0348 0000         A  1133    	LD	R8,_button_twice_timer:RAM
000000D4 4529 3B03126F     A  1134    	LD	R9,#990057071
000000DA F1 FFFF91         A  1135    	CALL	__fpadd
000000DE 0370 0000         A  1136    	LD	_button_twice_timer:RAM,R0
                           A  1137    ;  110		}
000000E2                   A  1138    _2_L_32:
                           A  1139    .line 110
                           A  1140    ;  111	
                           A  1141    ;  112		//updates the characters being displayed at timer_cutoff interval
                           A  1142    ;  113		if(timer >= timer_cutoff) {
                           A  1143    .line 113
000000E2 0349 002E         A  1144    	LD	R9,_timer_cutoff:RAM
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  23


PC     Object              I  Line    Source led_interrupts.src
000000E6 0348 002A         A  1145    	LD	R8,_timer:RAM
000000EA F1 FFFF89         A  1146    	CALL	__fpcmp
000000EE F221 0087         A  1147    	JP	LT,_2_L_33
                           A  1148    ;  114			timer = 0;
                           A  1149    .line 114
000000F2 ADA8 002A         A  1150    	CLR	_timer:RAM
                           A  1151    ;  115	
                           A  1152    ;  116			if(led_state == LED_UPTIME_S || led_state == LED_UPTIME_MS) {
                           A  1153    .line 116
000000F6 3001              A  1154    	LD	R0,#1
000000F8 7570 001E         A  1155    	CP	_led_state:RAM,R0
000000FC E6 04             A  1156    	JP	EQ,_2_L_16
000000FE 3002              A  1157    	LD	R0,#2
00000100 7570 001E         A  1158    	CP	_led_state:RAM,R0
00000104 EE 2A             A  1159    	JP	NE,_2_L_19
00000106                   A  1160    _2_L_16:
                           A  1161    ;  117				led_uptime = (unsigned int)((led_state == LED_UPTIME_S) ? (uptime / 1.0) : (upt
                           A  1162    .line 117
00000106 3001              A  1163    	LD	R0,#1
00000108 7570 001E         A  1164    	CP	_led_state:RAM,R0
0000010C EE 03             A  1165    	JP	NE,_2_L_7
0000010E 0340 0026         A  1166    	LD	R0,_uptime:RAM
00000112 C007              A  1167    	JP	_2_L_8
00000114                   A  1168    _2_L_7:
00000114 4529 3A83126F     A  1169    	LD	R9,#981668463
0000011A 0348 0026         A  1170    	LD	R8,_uptime:RAM
0000011E F1 FFFF6F         A  1171    	CALL	__fpdiv
00000122                   A  1172    _2_L_8:
00000122 4408              A  1173    	LD	R8,R0
00000124 F1 FFFF6C         A  1174    	CALL	__fpftol
00000128 4408              A  1175    	LD	R8,R0
                           A  1176    ;  118							
                           A  1177    ;  119				if(uptime_state == UPTIME_DEC) {
                           A  1178    .line 119
0000012A ADA9 0022         A  1179    	CPZ	_uptime_state:RAM
0000012E EE 09             A  1180    	JP	NE,_2_L_15
                           A  1181    ;  120					if(led_uptime > LED_DEC_MAX) {
                           A  1182    .line 120
00000130 AA58 270F         A  1183    	CP	R8,#9999
00000134 E3 02             A  1184    	JP	ULE,_2_L_10
                           A  1185    ;  121						led_uptime = LED_DEC_MAX;
                           A  1186    .line 121
00000136 4508 270F         A  1187    	LD	R8,#9999
                           A  1188    ;  122					}
0000013A                   A  1189    _2_L_10:
                           A  1190    .line 122
                           A  1191    ;  123					
                           A  1192    ;  124					led_set_int(led_uptime);
                           A  1193    .line 124
0000013A 4481              A  1194    	LD	R1,R8
0000013C F1 FFFF60         A  1195    	CALL	_led_set_int
                           A  1196    ;  125				}
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  24


PC     Object              I  Line    Source led_interrupts.src
                           A  1197    ;  126				else if(uptime_state == UPTIME_HEX) {
                           A  1198    .line 126
00000140 C00C              A  1199    	JP	_2_L_19
00000142                   A  1200    _2_L_15:
00000142 3001              A  1201    	LD	R0,#1
00000144 7570 0022         A  1202    	CP	_uptime_state:RAM,R0
00000148 EE 08             A  1203    	JP	NE,_2_L_19
                           A  1204    ;  127					if(led_uptime > LED_HEX_MAX) {
                           A  1205    .line 127
0000014A AA58 FFFF         A  1206    	CP	R8,#65535
0000014E E3 02             A  1207    	JP	ULE,_2_L_12
                           A  1208    ;  128						led_uptime = LED_HEX_MAX;
                           A  1209    .line 128
00000150 4508 FFFF         A  1210    	LD	R8,#65535
                           A  1211    ;  129					}
00000154                   A  1212    _2_L_12:
                           A  1213    .line 129
                           A  1214    ;  130						
                           A  1215    ;  131					led_set_int_hex(led_uptime);
                           A  1216    .line 131
00000154 4481              A  1217    	LD	R1,R8
00000156 F1 FFFF53         A  1218    	CALL	_led_set_int_hex
                           A  1219    ;  132				}
                           A  1220    ;  133			}
0000015A                   A  1221    _2_L_19:
                           A  1222    .line 133
                           A  1223    ;  134	
                           A  1224    ;  135			//update what each led is drawing
                           A  1225    ;  136			if(msg_size > 0) {
                           A  1226    .line 136
0000015A ADA9 0002         A  1227    	CPZ	_msg_size:RAM
0000015E E3 09             A  1228    	JP	ULE,_2_L_18
                           A  1229    ;  137				draw_char[0] = ((unsigned int)led_msg[msg_pos]) - ASCII_OFFSET;
                           A  1230    .line 137
00000160 0330 0018         A  1231    	LD.SW	R0,_msg_pos+2:RAM
00000164 7030 0000         A  1232    	ADD.SW	R0,_led_msg:RAM
00000168 1800              A  1233    	LD.UB	R0,(R0)
0000016A 80E0              A  1234    	ADD	R0,#-32
0000016C 0370 0006         A  1235    	LD	_draw_char:RAM,R0
                           A  1236    ;  138			}
                           A  1237    ;  139			else {
                           A  1238    .line 139
00000170 C002              A  1239    	JP	_2_L_22
00000172                   A  1240    _2_L_18:
                           A  1241    ;  140				draw_char[0] = ASCII_SPACE;
                           A  1242    .line 140
00000172 ADA8 0006         A  1243    	CLR	_draw_char:RAM
                           A  1244    ;  141			}
00000176                   A  1245    _2_L_22:
                           A  1246    .line 141
                           A  1247    ;  142			
                           A  1248    ;  143			if(msg_size > 1) {
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  25


PC     Object              I  Line    Source led_interrupts.src
                           A  1249    .line 143
00000176 3001              A  1250    	LD	R0,#1
00000178 7570 0002         A  1251    	CP	_msg_size:RAM,R0
0000017C E3 0D             A  1252    	JP	ULE,_2_L_21
                           A  1253    ;  144				draw_char[1] = ((unsigned int)led_msg[(msg_pos + 1) % msg_size]) - ASCII_OFFSET
                           A  1254    .line 144
0000017E 0341 0016         A  1255    	LD	R1,_msg_pos:RAM
00000182 8101              A  1256    	ADD	R1,#1
00000184 0340 0002         A  1257    	LD	R0,_msg_size:RAM
00000188 AE01              A  1258    	UDIV	R1,R0
0000018A 7030 0000         A  1259    	ADD.SW	R0,_led_msg:RAM
0000018E 1800              A  1260    	LD.UB	R0,(R0)
00000190 80E0              A  1261    	ADD	R0,#-32
00000192 0370 000A         A  1262    	LD	_draw_char+4:RAM,R0
                           A  1263    ;  145			}
                           A  1264    ;  146			else {
                           A  1265    .line 146
00000196 C002              A  1266    	JP	_2_L_25
00000198                   A  1267    _2_L_21:
                           A  1268    ;  147				draw_char[1] = ASCII_SPACE;
                           A  1269    .line 147
00000198 ADA8 000A         A  1270    	CLR	_draw_char+4:RAM
                           A  1271    ;  148			}
0000019C                   A  1272    _2_L_25:
                           A  1273    .line 148
                           A  1274    ;  149			
                           A  1275    ;  150			if(msg_size > 2) {
                           A  1276    .line 150
0000019C 3002              A  1277    	LD	R0,#2
0000019E 7570 0002         A  1278    	CP	_msg_size:RAM,R0
000001A2 E3 0D             A  1279    	JP	ULE,_2_L_24
                           A  1280    ;  151				draw_char[2] = ((unsigned int)led_msg[(msg_pos + 2) % msg_size]) - ASCII_OFFSET
                           A  1281    .line 151
000001A4 0341 0016         A  1282    	LD	R1,_msg_pos:RAM
000001A8 8102              A  1283    	ADD	R1,#2
000001AA 0340 0002         A  1284    	LD	R0,_msg_size:RAM
000001AE AE01              A  1285    	UDIV	R1,R0
000001B0 7030 0000         A  1286    	ADD.SW	R0,_led_msg:RAM
000001B4 1800              A  1287    	LD.UB	R0,(R0)
000001B6 80E0              A  1288    	ADD	R0,#-32
000001B8 0370 000E         A  1289    	LD	_draw_char+8:RAM,R0
                           A  1290    ;  152			}
                           A  1291    ;  153			else {
                           A  1292    .line 153
000001BC C002              A  1293    	JP	_2_L_28
000001BE                   A  1294    _2_L_24:
                           A  1295    ;  154				draw_char[2] = ASCII_SPACE;
                           A  1296    .line 154
000001BE ADA8 000E         A  1297    	CLR	_draw_char+8:RAM
                           A  1298    ;  155			}
000001C2                   A  1299    _2_L_28:
                           A  1300    .line 155
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  26


PC     Object              I  Line    Source led_interrupts.src
                           A  1301    ;  156			
                           A  1302    ;  157			if(msg_size > 3) {
                           A  1303    .line 157
000001C2 3003              A  1304    	LD	R0,#3
000001C4 7570 0002         A  1305    	CP	_msg_size:RAM,R0
000001C8 E3 0D             A  1306    	JP	ULE,_2_L_27
                           A  1307    ;  158				draw_char[3] = ((unsigned int)led_msg[(msg_pos + 3) % msg_size]) - ASCII_OFFSET
                           A  1308    .line 158
000001CA 0341 0016         A  1309    	LD	R1,_msg_pos:RAM
000001CE 8103              A  1310    	ADD	R1,#3
000001D0 0340 0002         A  1311    	LD	R0,_msg_size:RAM
000001D4 AE01              A  1312    	UDIV	R1,R0
000001D6 7030 0000         A  1313    	ADD.SW	R0,_led_msg:RAM
000001DA 1800              A  1314    	LD.UB	R0,(R0)
000001DC 80E0              A  1315    	ADD	R0,#-32
000001DE 0370 0012         A  1316    	LD	_draw_char+12:RAM,R0
                           A  1317    ;  159			}
                           A  1318    ;  160			else {
                           A  1319    .line 160
000001E2 C002              A  1320    	JP	_2_L_30
000001E4                   A  1321    _2_L_27:
                           A  1322    ;  161				draw_char[3] = ASCII_SPACE;
                           A  1323    .line 161
000001E4 ADA8 0012         A  1324    	CLR	_draw_char+12:RAM
                           A  1325    ;  162			}
000001E8                   A  1326    _2_L_30:
                           A  1327    .line 162
                           A  1328    ;  163	
                           A  1329    ;  164			//scroll if necessary
                           A  1330    ;  165			if(msg_size > 4) {
                           A  1331    .line 165
000001E8 3004              A  1332    	LD	R0,#4
000001EA 7570 0002         A  1333    	CP	_msg_size:RAM,R0
000001EE E3 08             A  1334    	JP	ULE,_2_L_33
                           A  1335    ;  166				msg_pos = (msg_pos + 1) % msg_size;
                           A  1336    .line 166
000001F0 0340 0016         A  1337    	LD	R0,_msg_pos:RAM
000001F4 8001              A  1338    	ADD	R0,#1
000001F6 0341 0002         A  1339    	LD	R1,_msg_size:RAM
000001FA AE10              A  1340    	UDIV	R0,R1
000001FC 0371 0016         A  1341    	LD	_msg_pos:RAM,R1
                           A  1342    ;  167			}
                           A  1343    ;  168		}
00000200                   A  1344    _2_L_33:
                           A  1345    .line 168
                           A  1346    ;  169	
                           A  1347    ;  170		//draw the current row for each LED
                           A  1348    ;  171		led_draw(D1);
                           A  1349    .line 171
00000200 3100              A  1350    	LD	R1,#0
00000202 D01C              A  1351    	CALL	_led_draw
                           A  1352    ;  172		led_draw(D2);
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  27


PC     Object              I  Line    Source led_interrupts.src
                           A  1353    .line 172
00000204 3101              A  1354    	LD	R1,#1
00000206 D01A              A  1355    	CALL	_led_draw
                           A  1356    ;  173		led_draw(D3);
                           A  1357    .line 173
00000208 3102              A  1358    	LD	R1,#2
0000020A D018              A  1359    	CALL	_led_draw
                           A  1360    ;  174		led_draw(D4);
                           A  1361    .line 174
0000020C 3103              A  1362    	LD	R1,#3
0000020E D016              A  1363    	CALL	_led_draw
                           A  1364    ;  175	
                           A  1365    ;  176		//move to the next row for next time
                           A  1366    ;  177		row_pos = (row_pos + 1) % NUM_ANODES;
                           A  1367    .line 177
00000210 0340 001A         A  1368    	LD	R0,_row_pos:RAM
00000214 8001              A  1369    	ADD	R0,#1
00000216 3107              A  1370    	LD	R1,#7
00000218 AE10              A  1371    	UDIV	R0,R1
0000021A 0371 001A         A  1372    	LD	_row_pos:RAM,R1
                           A  1373    ;  178	
                           A  1374    ;  179		//check buttons every debounce interval
                           A  1375    ;  180		if(button_timer >= debounce_cutoff) {
                           A  1376    .line 180
0000021E 0349 0000         A  1377    	LD	R9,_debounce_cutoff:RAM
00000222 0348 0000         A  1378    	LD	R8,_button_timer:RAM
00000226 F1 FFFEEB         A  1379    	CALL	__fpcmp
0000022A E1 04             A  1380    	JP	LT,_2_L_35
                           A  1381    ;  181			button_timer = 0;
                           A  1382    .line 181
0000022C ADA8 0000         A  1383    	CLR	_button_timer:RAM
                           A  1384    ;  182			button_events();
                           A  1385    .line 182
00000230 F1 FFFEE6         A  1386    	CALL	_button_events
                           A  1387    ;  183		}
                           A  1388    ;  184	}
00000234                   A  1389    _2_L_35:
                           A  1390    .line 184
00000234 0703              A  1391    	POPMHI	#3
00000236 06FF              A  1392    	POPMLO	#255
00000238 0001              A  1393    	UNLINK	
0000023A FFFD              A  1394    	IRET	
                           A  1395    
                           A  1396    
                           A  1397    ;**************************** _draw_timer_isr ***************************
                           A  1398    ;Name                         Addr/Register   Size   Type
                           A  1399    ;_button_events                      IMPORT  -----   function
                           A  1400    ;_debounce_cutoff                    IMPORT      4   variable
                           A  1401    ;_row_pos                            STATIC      4   variable
                           A  1402    ;_led_draw                           STATIC  -----   function
                           A  1403    ;_draw_char                          STATIC     16   variable
                           A  1404    ;_msg_pos                            STATIC      4   variable
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  28


PC     Object              I  Line    Source led_interrupts.src
                           A  1405    ;_led_msg                            STATIC      2   variable
                           A  1406    ;_msg_size                           STATIC      4   variable
                           A  1407    ;_led_set_int_hex                    IMPORT  -----   function
                           A  1408    ;_led_set_int                        IMPORT  -----   function
                           A  1409    ;_uptime_state                       STATIC      4   variable
                           A  1410    ;_led_state                          STATIC      4   variable
                           A  1411    ;_timer_cutoff                       STATIC      4   variable
                           A  1412    ;_last_button                        IMPORT      1   variable
                           A  1413    ;_button_twice_cutoff                IMPORT      4   variable
                           A  1414    ;_button_twice_timer                 IMPORT      4   variable
                           A  1415    ;_button_timer                       IMPORT      4   variable
                           A  1416    ;_uptime                             STATIC      4   variable
                           A  1417    ;_timer                              STATIC      4   variable
                           A  1418    ;temp5                                   R0      4   variable
                           A  1419    ;led_uptime                              R8      4   variable
                           A  1420    
                           A  1421    
                           A  1422    ; Aggregate Stack Size: 0 (words)
                           A  1423    
                           A  1424    
                           A  1425    .endfunc "draw_timer_isr",184,"_draw_timer_isr"
                           A  1426    ;  185	
                           A  1427    ;  186	/*
                           A  1428    ;  187	 	Draws the current row to a particular LED
                           A  1429    ;  188	 */
                           A  1430    ;  189	static void led_draw(unsigned int led_id)
                           A  1431    ;  190	{
0000023C                   A  1432    _led_draw:
                           A  1433    .define "_led_draw"
                           A  1434    .value _led_draw
                           A  1435    .class 3
                           A  1436    .type 65
                           A  1437    .type 0
                           A  1438    .endef
                           A  1439    .begfunc "led_draw",190,"_led_draw"
                           A  1440    .line 190
                           A  1441    .define "led_id"
                           A  1442    .class 17
                           A  1443    .reg 2
                           A  1444    .type 15
                           A  1445    .type 0
                           A  1446    .endef
0000023C 0800              A  1447    	LINK	#0
                           A  1448    ;  191		// set cathodes
                           A  1449    ;  192		PEOUT |= 0x1F;
                           A  1450    .line 192
0000023E 301F              A  1451    	LD	R0,#31
00000240 7350 E141         A  1452    	OR.B	57665:RAM,R0
                           A  1453    ;  193		PEOUT &= ~char_data[draw_char[led_id]][row_pos];
                           A  1454    .line 193
00000244 4410              A  1455    	LD	R0,R1
00000246 BC20              A  1456    	SLL	R0,#2
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  29


PC     Object              I  Line    Source led_interrupts.src
00000248 4512 0006         A  1457    	LD	R2,#_draw_char
0000024C A020              A  1458    	ADD	R0,R2
0000024E 1200              A  1459    	LD	R0,(R0)
00000250 3207              A  1460    	LD	R2,#7
00000252 B220              A  1461    	MUL	R0,R2
00000254 4512 0000         A  1462    	LD	R2,#_char_data
00000258 A002              A  1463    	ADD	R2,R0
0000025A 0330 001C         A  1464    	LD.SW	R0,_row_pos+2:RAM
0000025E A020              A  1465    	ADD	R0,R2
00000260 1C00              A  1466    	LD.SB	R0,(R0)
00000262 4540              A  1467    	COM	R0
00000264 7250 E141         A  1468    	AND.B	57665:RAM,R0
                           A  1469    ;  194	
                           A  1470    ;  195		// set anodes
                           A  1471    ;  196		PGOUT &= 0x80;
                           A  1472    .line 196
00000268 4500 0080         A  1473    	LD	R0,#128
0000026C 7250 E161         A  1474    	AND.B	57697:RAM,R0
                           A  1475    ;  197		PGOUT |= led_anode[row_pos];
                           A  1476    .line 197
00000270 0340 001A         A  1477    	LD	R0,_row_pos:RAM
00000274 BC20              A  1478    	SLL	R0,#2
00000276 4512 0299         A  1479    	LD	R2,#_led_anode
0000027A A020              A  1480    	ADD	R0,R2
0000027C 4900 8003         A  1481    	LD.SB	R0,3(R0)
00000280 7350 E161         A  1482    	OR.B	57697:RAM,R0
                           A  1483    ;  198	
                           A  1484    ;  199		//latch the LED
                           A  1485    ;  200		if(led_id == D1) {               // PE7 controls D1
                           A  1486    .line 200
00000284 9100              A  1487    	CP	R1,#0
00000286 EE 08             A  1488    	JP	NE,_3_L_42
                           A  1489    ;  201	        PEOUT &= ~0x80;           //   create rising edge on PE7, clear bit 7
                           A  1490    .line 201
00000288 307F              A  1491    	LD	R0,#127
0000028A 7250 E141         A  1492    	AND.B	57665:RAM,R0
                           A  1493    ;  202	        PEOUT |= 0x80;            //   set bit 7
                           A  1494    .line 202
0000028E 4500 0080         A  1495    	LD	R0,#128
00000292 7350 E141         A  1496    	OR.B	57665:RAM,R0
                           A  1497    ;  203	    }
                           A  1498    ;  204	    else if(led_id == D2) {               // PG7 controls D2
                           A  1499    .line 204
00000296 C01B              A  1500    	JP	_3_L_43
00000298                   A  1501    _3_L_42:
00000298 9101              A  1502    	CP	R1,#1
0000029A EE 08             A  1503    	JP	NE,_3_L_40
                           A  1504    ;  205	        PGOUT &= ~0x80;           //   create rising edge on PG7
                           A  1505    .line 205
0000029C 307F              A  1506    	LD	R0,#127
0000029E 7250 E161         A  1507    	AND.B	57697:RAM,R0
                           A  1508    ;  206	        PGOUT |= 0x80; 
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  30


PC     Object              I  Line    Source led_interrupts.src
                           A  1509    .line 206
000002A2 4500 0080         A  1510    	LD	R0,#128
000002A6 7350 E161         A  1511    	OR.B	57697:RAM,R0
                           A  1512    ;  207	    }
                           A  1513    ;  208	    else if(led_id == D3) {               // PE5 controls D3
                           A  1514    .line 208
000002AA C011              A  1515    	JP	_3_L_43
000002AC                   A  1516    _3_L_40:
000002AC 9102              A  1517    	CP	R1,#2
000002AE EE 07             A  1518    	JP	NE,_3_L_38
                           A  1519    ;  209	        PEOUT &= ~0x20;           //   create rising edge on PE5
                           A  1520    .line 209
000002B0 30DF              A  1521    	LD	R0,#-33
000002B2 7250 E141         A  1522    	AND.B	57665:RAM,R0
                           A  1523    ;  210	        PEOUT |= 0x20; 
                           A  1524    .line 210
000002B6 3020              A  1525    	LD	R0,#32
000002B8 7350 E141         A  1526    	OR.B	57665:RAM,R0
                           A  1527    ;  211	    }
                           A  1528    ;  212	    else if(led_id == D4) {               // PE6 controls D4
                           A  1529    .line 212
000002BC C008              A  1530    	JP	_3_L_43
000002BE                   A  1531    _3_L_38:
000002BE 9103              A  1532    	CP	R1,#3
000002C0 EE 06             A  1533    	JP	NE,_3_L_43
                           A  1534    ;  213	        PEOUT &= ~0x40;           //   create rising edge on PE6
                           A  1535    .line 213
000002C2 30BF              A  1536    	LD	R0,#-65
000002C4 7250 E141         A  1537    	AND.B	57665:RAM,R0
                           A  1538    ;  214	        PEOUT |= 0x40; 
                           A  1539    .line 214
000002C8 3040              A  1540    	LD	R0,#64
000002CA 7350 E141         A  1541    	OR.B	57665:RAM,R0
                           A  1542    ;  215	    }
                           A  1543    ;  216	}	
000002CE                   A  1544    _3_L_43:
                           A  1545    .line 216
000002CE 0001              A  1546    	UNLINK	
000002D0 FFFC              A  1547    	RET	
                           A  1548    
                           A  1549    
                           A  1550    ;**************************** _led_draw ***************************
                           A  1551    ;Name                         Addr/Register   Size   Type
                           A  1552    ;_led_anode                          STATIC     28   variable
                           A  1553    ;_row_pos                            STATIC      4   variable
                           A  1554    ;_draw_char                          STATIC     16   variable
                           A  1555    ;_char_data                          STATIC    665   variable
                           A  1556    ;led_id                                  R1      4   parameter
                           A  1557    
                           A  1558    
                           A  1559    ; Aggregate Stack Size: 0 (words)
                           A  1560    
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  31


PC     Object              I  Line    Source led_interrupts.src
                           A  1561    
                           A  1562    .endfunc "led_draw",216,"_led_draw"
                           A  1563    ;  217	
                           A  1564    ;  218	/*
                           A  1565    ;  219		Initialize the millisecond timer.
                           A  1566    ;  220	 */
                           A  1567    ;  221	static void init_led_draw_timer(void)
                           A  1568    ;  222	{
000002D2                   A  1569    _init_led_draw_timer:
                           A  1570    .define "_init_led_draw_timer"
                           A  1571    .value _init_led_draw_timer
                           A  1572    .class 3
                           A  1573    .type 65
                           A  1574    .type 0
                           A  1575    .endef
                           A  1576    .begfunc "init_led_draw_timer",222,"_init_led_draw_timer"
                           A  1577    ;  223		T0CTL1 |= TIMER_DISABLE;
                           A  1578    .line 223
000002D2 0800              A  1579    	LINK	#0
                           A  1580    ;  224	
                           A  1581    ;  225	    T0CTL1 = TIMER_MODE_CONTINUOUS + TIMER_PRESCALE_128;
                           A  1582    .line 225
000002D4 3039              A  1583    	LD	R0,#57
000002D6 0350 E307         A  1584    	LD.B	58119:RAM,R0
                           A  1585    ;  226	
                           A  1586    ;  227	    // Initial counter value
                           A  1587    ;  228	    T0HL = 0x00;
                           A  1588    .line 228
000002DA ADA4 E300         A  1589    	CLR.W	58112:RAM
                           A  1590    ;  229	
                           A  1591    ;  230	    // Timer reload
                           A  1592    ;  231	    //   reload = clock / prescale * timeout  
                           A  1593    ;  232	    T0R = CLOCK / 128 * DRAW_TIME;
                           A  1594    .line 232
000002DE 3055              A  1595    	LD	R0,#85
000002E0 0360 E302         A  1596    	LD.W	58114:RAM,R0
                           A  1597    ;  233	
                           A  1598    ;  234		// Enable Timer0 interrupt
                           A  1599    ;  235	    IRQ0EN = IRQ_Timer0;
                           A  1600    .line 235
000002E4 3020              A  1601    	LD	R0,#32
000002E6 0360 E032         A  1602    	LD.W	57394:RAM,R0
                           A  1603    ;  236	
                           A  1604    ;  237		T0CTL1 |= TIMER_ENABLE;
                           A  1605    .line 237
000002EA 4500 0080         A  1606    	LD	R0,#128
000002EE 7350 E307         A  1607    	OR.B	58119:RAM,R0
                           A  1608    ;  238	
                           A  1609    ;  239		SET_VECTOR(TIMER0, draw_timer_isr);
                           A  1610    ;  240	}
                           A  1611    .line 240
000002F2 0001              A  1612    	UNLINK	
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               15-Feb-11     21:07:31     page:  32


PC     Object              I  Line    Source led_interrupts.src
000002F4 FFFC              A  1613    	RET	
                           A  1614    
                           A  1615    
                           A  1616    ;**************************** _init_led_draw_timer ***************************
                           A  1617    ;Name                         Addr/Register   Size   Type
                           A  1618    ;_SET_VECTOR                         IMPORT  -----   function
                           A  1619    
                           A  1620    
                           A  1621    ; Aggregate Stack Size: 0 (words)
                           A  1622    
                           A  1623    
                           A  1624    .endfunc "init_led_draw_timer",240,"_init_led_draw_timer"
00000018 0000006C          A  1625    	VECTOR	TIMER0=_draw_timer_isr
                           A  1626    	XREF _last_button:RAM
                           A  1627    	XREF _button_twice_cutoff:RAM
                           A  1628    	XREF _button_twice_timer:RAM
                           A  1629    	XREF _debounce_cutoff:RAM
                           A  1630    	XREF _button_timer:RAM
                           A  1631    	XREF _led_set_int_hex:EROM
                           A  1632    	XREF _led_set_int:EROM
                           A  1633    	XREF _button_events:EROM
                           A  1634    	XREF __fpftol:EROM
                           A  1635    	XREF __fpadd:EROM
                           A  1636    	XREF __fpcmp:EROM
                           A  1637    	XREF __fpdiv:EROM
                           A  1638    	XDEF _draw_timer_isr
                           A  1639    	XDEF _init_led_timers
                           A  1640    	XDEF _timer_cutoff
                           A  1641    	XDEF _timer
                           A  1642    	XDEF _uptime
                           A  1643    	XDEF _uptime_state
                           A  1644    	XDEF _led_state
                           A  1645    	XDEF _row_pos
                           A  1646    	XDEF _msg_pos
                           A  1647    	XDEF _draw_char
                           A  1648    	XDEF _msg_size
                           A  1649    	XDEF _led_msg
                           A  1650    	XDEF _char_data
                           A  1651    	END


Errors: 0
Warnings: 0
Lines Assembled: 1652
