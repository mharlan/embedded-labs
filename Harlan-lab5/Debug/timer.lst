ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   1


PC     Object              I  Line    Source 
                           A     1    ; ZiLOG ZNEO ANSI C Compiler Release 1.11
                           A     2    ; -nolocalcse -optsize -model=S -nomodsect -noregvar
                           A     3    ; -reduceopt -debug -peephole -const=ROM -alias -fastcall
                           A     4    	FILE	"..\TIMER.C"
                           A     5    .debug "C"
                           A     6    	SEGMENT NEAR_BSS
00000000                   A     7    _timer_state:
00000000                   A     8    	DS	4*1
                           A     9    .define "timer_state"
                           A    10    .alias "_timer_state"
                           A    11    .class 147
                           A    12    .value _timer_state
                           A    13    .type 5
                           A    14    .type 0
                           A    15    .endef
                           A    16    ;    1	#include "timer.h"
                           A    17    ;    2	#include "oscillator.h"
                           A    18    ;    3	#include "LED.h"
                           A    19    ;    4	#include "buttons.h"
                           A    20    ;    5	#include "uart.h"
                           A    21    ;    6	
                           A    22    ;    7	#include <zneo.h>
                           A    23    ;    8	#include <string.h>
                           A    24    ;    9	
                           A    25    ;   10	#define INTERVAL_1MS_INT 1
                           A    26    ;   11	#define INTERVAL_2MS_INT 2
                           A    27    ;   12	#define INTERVAL_4MS_INT 4
                           A    28    ;   13	
                           A    29    ;   14	#define INTERVAL_1MS_FLOAT 0.001f
                           A    30    ;   15	#define INTERVAL_2MS_FLOAT 0.002f
                           A    31    ;   16	#define INTERVAL_4MS_FLOAT 0.004f
                           A    32    ;   17	
                           A    33    ;   18	static int timer_state;
                           A    34    	SEGMENT CODE
                           A    35    ;   19	
                           A    36    ;   20	/*
                           A    37    ;   21		Interrupt for timer events.
                           A    38    ;   22	
                           A    39    ;   23		Used for updating the LED, polling the buttons, and responding
                           A    40    ;   24		to note change events for the speaker..
                           A    41    ;   25	 */
                           A    42    ;   26	void interrupt timer_isr(void)
                           A    43    ;   27	{
00000000                   A    44    _timer_isr:
                           A    45    .define "_timer_isr"
                           A    46    .value _timer_isr
                           A    47    .class 2
                           A    48    .type 65
                           A    49    .type 0
                           A    50    .endef
                           A    51    .begfunc "timer_isr",27,"_timer_isr"
00000000 0800              A    52    	LINK	#0
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   2


PC     Object              I  Line    Source timer.src
00000002 04FF              A    53    	PUSHMLO	#255
                           A    54    ;   28		//enable interrupts for speaker interrupt
                           A    55    ;   29		EI();
                           A    56    .line 29
00000004 FFFA              A    57    	EI
                           A    58    ;   30	
                           A    59    ;   31		led_update();
                           A    60    .line 31
00000006 F1 FFFFFB         A    61    	CALL	_led_update
                           A    62    ;   32		button_events();
                           A    63    .line 32
0000000A F1 FFFFF9         A    64    	CALL	_button_events
                           A    65    ;   33	}
                           A    66    .line 33
0000000E 06FF              A    67    	POPMLO	#255
00000010 0001              A    68    	UNLINK	
00000012 FFFD              A    69    	IRET	
                           A    70    
                           A    71    
                           A    72    ;**************************** _timer_isr ***************************
                           A    73    ;Name                         Addr/Register   Size   Type
                           A    74    ;_button_events                      IMPORT  -----   function
                           A    75    ;_led_update                         IMPORT  -----   function
                           A    76    ;_EI                                 IMPORT  -----   function
                           A    77    
                           A    78    
                           A    79    ; Aggregate Stack Size: 0 (words)
                           A    80    
                           A    81    
                           A    82    .endfunc "timer_isr",33,"_timer_isr"
                           A    83    ;   34	
                           A    84    ;   35	void init_timer(int mode)
                           A    85    ;   36	{
00000014                   A    86    _init_timer:
                           A    87    .define "_init_timer"
                           A    88    .value _init_timer
                           A    89    .class 2
                           A    90    .type 65
                           A    91    .type 0
                           A    92    .endef
                           A    93    .begfunc "init_timer",36,"_init_timer"
00000014 0804              A    94    	LINK	#4
00000016 05C0              A    95    	PUSHMHI	#3
                           A    96    .line 36
00000018 5BC1              A    97    	LD	-4(R14),R1
                           A    98    .define "mode"
                           A    99    .class 9
                           A   100    .value -4
                           A   101    .type 5
                           A   102    .type 0
                           A   103    .endef
                           A   104    ;   37		timer_state = mode;
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   3


PC     Object              I  Line    Source timer.src
                           A   105    .line 37
0000001A 5FC0              A   106    	LD	R0,-4(R14)
0000001C 0370 0000         A   107    	LD	_timer_state:RAM,R0
                           A   108    ;   38	
                           A   109    ;   39		T0CTL1 |= TIMER_DISABLE;
                           A   110    .line 39
00000020 0310 E307         A   111    	LD.SB	R0,58119:RAM
                           A   112    ;   40	    T0CTL1 = TIMER_MODE_CONTINUOUS + TIMER_PRESCALE_128;
                           A   113    .line 40
00000024 3039              A   114    	LD	R0,#57
00000026 0350 E307         A   115    	LD.B	58119:RAM,R0
                           A   116    ;   41	
                           A   117    ;   42	    // Initial counter value
                           A   118    ;   43	    T0HL = 0x00;
                           A   119    .line 43
0000002A ADA4 E300         A   120    	CLR.W	58112:RAM
                           A   121    ;   44	
                           A   122    ;   45		if(timer_state == TIMER_4MS) {
                           A   123    .line 45
0000002E 3004              A   124    	LD	R0,#4
00000030 7570 0000         A   125    	CP	_timer_state:RAM,R0
00000034 EE 14             A   126    	JP	NE,_2_L_4
                           A   127    ;   46			// Timer reload
                           A   128    ;   47	    	//   reload = clock / prescale * timeout  
                           A   129    ;   48	   	 	T0R = (get_osc_clock() / 128) * INTERVAL_4MS_FLOAT;
                           A   130    .line 48
00000036 F1 FFFFE3         A   131    	CALL	_get_osc_clock
0000003A 4501 0080         A   132    	LD	R1,#128
0000003E AF10              A   133    	SDIV	R0,R1
00000040 4408              A   134    	LD	R8,R0
00000042 F1 FFFFDD         A   135    	CALL	__fpltof
00000046 4408              A   136    	LD	R8,R0
00000048 4529 3B83126F     A   137    	LD	R9,#998445679
0000004E F1 FFFFD7         A   138    	CALL	__fpmul
00000052 4408              A   139    	LD	R8,R0
00000054 F1 FFFFD4         A   140    	CALL	__fpftol
00000058 0360 E302         A   141    	LD.W	58114:RAM,R0
                           A   142    ;   49		}
                           A   143    ;   50		else if(timer_state == TIMER_1MS) {
                           A   144    .line 50
0000005C C02B              A   145    	JP	_2_L_5
0000005E                   A   146    _2_L_4:
0000005E 3001              A   147    	LD	R0,#1
00000060 7570 0000         A   148    	CP	_timer_state:RAM,R0
00000064 EE 14             A   149    	JP	NE,_2_L_2
                           A   150    ;   51			T0R = (get_osc_clock() / 128) * INTERVAL_1MS_FLOAT;
                           A   151    .line 51
00000066 F1 FFFFCB         A   152    	CALL	_get_osc_clock
0000006A 4501 0080         A   153    	LD	R1,#128
0000006E AF10              A   154    	SDIV	R0,R1
00000070 4408              A   155    	LD	R8,R0
00000072 F1 FFFFC5         A   156    	CALL	__fpltof
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   4


PC     Object              I  Line    Source timer.src
00000076 4408              A   157    	LD	R8,R0
00000078 4529 3A83126F     A   158    	LD	R9,#981668463
0000007E F1 FFFFBF         A   159    	CALL	__fpmul
00000082 4408              A   160    	LD	R8,R0
00000084 F1 FFFFBC         A   161    	CALL	__fpftol
00000088 0360 E302         A   162    	LD.W	58114:RAM,R0
                           A   163    ;   52		}
                           A   164    ;   53		//default timer is 2ms
                           A   165    ;   54		else {
                           A   166    .line 54
0000008C C013              A   167    	JP	_2_L_5
0000008E                   A   168    _2_L_2:
                           A   169    ;   55			T0R = (get_osc_clock() / 128) * INTERVAL_2MS_FLOAT;
                           A   170    .line 55
0000008E F1 FFFFB7         A   171    	CALL	_get_osc_clock
00000092 4501 0080         A   172    	LD	R1,#128
00000096 AF10              A   173    	SDIV	R0,R1
00000098 4408              A   174    	LD	R8,R0
0000009A F1 FFFFB1         A   175    	CALL	__fpltof
0000009E 4408              A   176    	LD	R8,R0
000000A0 4529 3B03126F     A   177    	LD	R9,#990057071
000000A6 F1 FFFFAB         A   178    	CALL	__fpmul
000000AA 4408              A   179    	LD	R8,R0
000000AC F1 FFFFA8         A   180    	CALL	__fpftol
000000B0 0360 E302         A   181    	LD.W	58114:RAM,R0
                           A   182    ;   56		}
000000B4                   A   183    _2_L_5:
                           A   184    .line 56
                           A   185    ;   57	
                           A   186    ;   58		// Enable Timer0 interrupt
                           A   187    ;   59	    IRQ0EN |= IRQ_Timer0;
                           A   188    .line 59
000000B4 3020              A   189    	LD	R0,#32
000000B6 7360 E032         A   190    	OR.W	57394:RAM,R0
                           A   191    ;   60	
                           A   192    ;   61		T0CTL1 |= TIMER_ENABLE;
                           A   193    .line 61
000000BA 4500 0080         A   194    	LD	R0,#128
000000BE 7350 E307         A   195    	OR.B	58119:RAM,R0
                           A   196    ;   62	
                           A   197    ;   63		SET_VECTOR(TIMER0, timer_isr);
                           A   198    ;   64	}
                           A   199    .line 64
000000C2 0703              A   200    	POPMHI	#3
000000C4 0001              A   201    	UNLINK	
000000C6 FFFC              A   202    	RET	
                           A   203    
                           A   204    
                           A   205    ;**************************** _init_timer ***************************
                           A   206    ;Name                         Addr/Register   Size   Type
                           A   207    ;_SET_VECTOR                         IMPORT  -----   function
                           A   208    ;_get_osc_clock                      IMPORT  -----   function
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   5


PC     Object              I  Line    Source timer.src
                           A   209    ;_timer_state                        STATIC      4   variable
                           A   210    ;mode                                 R14-4      4   parameter
                           A   211    
                           A   212    
                           A   213    ; Aggregate Stack Size: -4 (words)
                           A   214    
                           A   215    
                           A   216    .endfunc "init_timer",64,"_init_timer"
                           A   217    ;   65	
                           A   218    ;   66	int timer_interval_int(void)
                           A   219    ;   67	{
000000C8                   A   220    _timer_interval_int:
                           A   221    .define "_timer_interval_int"
                           A   222    .value _timer_interval_int
                           A   223    .class 2
                           A   224    .type 69
                           A   225    .type 0
                           A   226    .endef
                           A   227    .begfunc "timer_interval_int",67,"_timer_interval_int"
000000C8 0800              A   228    	LINK	#0
                           A   229    ;   68		if(timer_state == TIMER_1MS) {
                           A   230    .line 68
000000CA 3001              A   231    	LD	R0,#1
000000CC 7570 0000         A   232    	CP	_timer_state:RAM,R0
000000D0 EE 01             A   233    	JP	NE,_3_L_10
                           A   234    ;   69			return INTERVAL_1MS_INT;
                           A   235    .line 69
000000D2 C006              A   236    	JP	_3_L_11
                           A   237    ;   70		}
                           A   238    ;   71		else if(timer_state == TIMER_2MS) {
000000D4                   A   239    _3_L_10:
                           A   240    .line 71
000000D4 3002              A   241    	LD	R0,#2
000000D6 7570 0000         A   242    	CP	_timer_state:RAM,R0
000000DA EE 01             A   243    	JP	NE,_3_L_8
                           A   244    ;   72			return INTERVAL_2MS_INT;
                           A   245    .line 72
000000DC C001              A   246    	JP	_3_L_11
                           A   247    ;   73		}
                           A   248    ;   74		else {
000000DE                   A   249    _3_L_8:
                           A   250    .line 74
                           A   251    ;   75			return INTERVAL_4MS_INT;
                           A   252    .line 75
000000DE 3004              A   253    	LD	R0,#4
                           A   254    ;   76		}
                           A   255    ;   77	}
000000E0                   A   256    _3_L_11:
                           A   257    .line 77
000000E0 0001              A   258    	UNLINK	
000000E2 FFFC              A   259    	RET	
                           A   260    
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   6


PC     Object              I  Line    Source timer.src
                           A   261    
                           A   262    ;**************************** _timer_interval_int ***************************
                           A   263    ;Name                         Addr/Register   Size   Type
                           A   264    ;_timer_state                        STATIC      4   variable
                           A   265    
                           A   266    
                           A   267    ; Aggregate Stack Size: 0 (words)
                           A   268    
                           A   269    
                           A   270    .endfunc "timer_interval_int",77,"_timer_interval_int"
                           A   271    ;   78	
                           A   272    ;   79	float timer_interval_float(void)
                           A   273    ;   80	{
000000E4                   A   274    _timer_interval_float:
                           A   275    .define "_timer_interval_float"
                           A   276    .value _timer_interval_float
                           A   277    .class 2
                           A   278    .type 70
                           A   279    .type 0
                           A   280    .endef
                           A   281    .begfunc "timer_interval_float",80,"_timer_interval_float"
000000E4 0800              A   282    	LINK	#0
                           A   283    ;   81		if(timer_state == TIMER_1MS) {
                           A   284    .line 81
000000E6 3001              A   285    	LD	R0,#1
000000E8 7570 0000         A   286    	CP	_timer_state:RAM,R0
000000EC EE 04             A   287    	JP	NE,_4_L_15
                           A   288    ;   82			return INTERVAL_1MS_FLOAT;
                           A   289    .line 82
000000EE 4520 3A83126F     A   290    	LD	R0,#981668463
000000F4 C00B              A   291    	JP	_4_L_16
                           A   292    ;   83		}
                           A   293    ;   84		else if(timer_state == TIMER_2MS) {
000000F6                   A   294    _4_L_15:
                           A   295    .line 84
000000F6 3002              A   296    	LD	R0,#2
000000F8 7570 0000         A   297    	CP	_timer_state:RAM,R0
000000FC EE 04             A   298    	JP	NE,_4_L_13
                           A   299    ;   85			return INTERVAL_2MS_FLOAT;
                           A   300    .line 85
000000FE 4520 3B03126F     A   301    	LD	R0,#990057071
00000104 C003              A   302    	JP	_4_L_16
                           A   303    ;   86		}
                           A   304    ;   87		else {
00000106                   A   305    _4_L_13:
                           A   306    .line 87
                           A   307    ;   88			return INTERVAL_4MS_FLOAT;
                           A   308    .line 88
00000106 4520 3B83126F     A   309    	LD	R0,#998445679
                           A   310    ;   89		}
                           A   311    ;   90	}
0000010C                   A   312    _4_L_16:
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   7


PC     Object              I  Line    Source timer.src
                           A   313    .line 90
0000010C 0001              A   314    	UNLINK	
0000010E FFFC              A   315    	RET	
                           A   316    
                           A   317    
                           A   318    ;**************************** _timer_interval_float ***************************
                           A   319    ;Name                         Addr/Register   Size   Type
                           A   320    ;_timer_state                        STATIC      4   variable
                           A   321    
                           A   322    
                           A   323    ; Aggregate Stack Size: 0 (words)
                           A   324    
                           A   325    
                           A   326    .endfunc "timer_interval_float",90,"_timer_interval_float"
                           A   327    	SEGMENT ROM_TEXT
00000000                   A   328    L__10:
00000000 0A00              A   329    	DB	10,0
00000002                   A   330    L__11:
00000002 30                A   331    	DB	"0"
00000003 00                A   332    	DB	0
00000004                   A   333    L__13:
00000004 5430483A          A   334    	DB	"T0H:"
00000008 09                A   335    	DB	9
00000009 252E3258          A   336    	DB	"%.2X"
0000000D 0A00              A   337    	DB	10,0
0000000F                   A   338    L__14:
0000000F 54304C3A          A   339    	DB	"T0L:"
00000013 09                A   340    	DB	9
00000014 252E3258          A   341    	DB	"%.2X"
00000018 0A00              A   342    	DB	10,0
0000001A                   A   343    L__15:
0000001A 54305248 3A       A   344    	DB	"T0RH:"
0000001F 09                A   345    	DB	9
00000020 252E3258          A   346    	DB	"%.2X"
00000024 0A00              A   347    	DB	10,0
00000026                   A   348    L__16:
00000026 5430524C 3A       A   349    	DB	"T0RL:"
0000002B 09                A   350    	DB	9
0000002C 252E3258          A   351    	DB	"%.2X"
00000030 0A00              A   352    	DB	10,0
00000032                   A   353    L__17:
00000032 54305057 4D483A   A   354    	DB	"T0PWMH:"
00000039 09                A   355    	DB	9
0000003A 252E3258          A   356    	DB	"%.2X"
0000003E 0A00              A   357    	DB	10,0
00000040                   A   358    L__18:
00000040 54305057 4D4C3A   A   359    	DB	"T0PWML:"
00000047 09                A   360    	DB	9
00000048 252E3258          A   361    	DB	"%.2X"
0000004C 0A00              A   362    	DB	10,0
0000004E                   A   363    L__19:
0000004E 54304354 4C303A   A   364    	DB	"T0CTL0:"
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   8


PC     Object              I  Line    Source timer.src
00000055 09                A   365    	DB	9
00000056 252E3258          A   366    	DB	"%.2X"
0000005A 0A00              A   367    	DB	10,0
0000005C                   A   368    L__20:
0000005C 54304354 4C313A   A   369    	DB	"T0CTL1:"
00000063 09                A   370    	DB	9
00000064 252E3258          A   371    	DB	"%.2X"
00000068 0A00              A   372    	DB	10,0
0000006A                   A   373    L__21:
0000006A 31                A   374    	DB	"1"
0000006B 00                A   375    	DB	0
0000006C                   A   376    L__23:
0000006C 5431483A          A   377    	DB	"T1H:"
00000070 09                A   378    	DB	9
00000071 252E3258          A   379    	DB	"%.2X"
00000075 0A00              A   380    	DB	10,0
00000077                   A   381    L__24:
00000077 54314C3A          A   382    	DB	"T1L:"
0000007B 09                A   383    	DB	9
0000007C 252E3258          A   384    	DB	"%.2X"
00000080 0A00              A   385    	DB	10,0
00000082                   A   386    L__25:
00000082 54315248 3A       A   387    	DB	"T1RH:"
00000087 09                A   388    	DB	9
00000088 252E3258          A   389    	DB	"%.2X"
0000008C 0A00              A   390    	DB	10,0
0000008E                   A   391    L__26:
0000008E 5431524C 3A       A   392    	DB	"T1RL:"
00000093 09                A   393    	DB	9
00000094 252E3258          A   394    	DB	"%.2X"
00000098 0A00              A   395    	DB	10,0
0000009A                   A   396    L__27:
0000009A 54315057 4D483A   A   397    	DB	"T1PWMH:"
000000A1 09                A   398    	DB	9
000000A2 252E3258          A   399    	DB	"%.2X"
000000A6 0A00              A   400    	DB	10,0
000000A8                   A   401    L__28:
000000A8 54315057 4D4C3A   A   402    	DB	"T1PWML:"
000000AF 09                A   403    	DB	9
000000B0 252E3258          A   404    	DB	"%.2X"
000000B4 0A00              A   405    	DB	10,0
000000B6                   A   406    L__29:
000000B6 54314354 4C303A   A   407    	DB	"T1CTL0:"
000000BD 09                A   408    	DB	9
000000BE 252E3258          A   409    	DB	"%.2X"
000000C2 0A00              A   410    	DB	10,0
000000C4                   A   411    L__30:
000000C4 54314354 4C313A   A   412    	DB	"T1CTL1:"
000000CB 09                A   413    	DB	9
000000CC 252E3258          A   414    	DB	"%.2X"
000000D0 0A00              A   415    	DB	10,0
000000D2                   A   416    L__31:
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:   9


PC     Object              I  Line    Source timer.src
000000D2 32                A   417    	DB	"2"
000000D3 00                A   418    	DB	0
000000D4                   A   419    L__33:
000000D4 5432483A          A   420    	DB	"T2H:"
000000D8 09                A   421    	DB	9
000000D9 252E3258          A   422    	DB	"%.2X"
000000DD 0A00              A   423    	DB	10,0
000000DF                   A   424    L__34:
000000DF 54324C3A          A   425    	DB	"T2L:"
000000E3 09                A   426    	DB	9
000000E4 252E3258          A   427    	DB	"%.2X"
000000E8 0A00              A   428    	DB	10,0
000000EA                   A   429    L__35:
000000EA 54325248 3A       A   430    	DB	"T2RH:"
000000EF 09                A   431    	DB	9
000000F0 252E3258          A   432    	DB	"%.2X"
000000F4 0A00              A   433    	DB	10,0
000000F6                   A   434    L__36:
000000F6 5432524C 3A       A   435    	DB	"T2RL:"
000000FB 09                A   436    	DB	9
000000FC 252E3258          A   437    	DB	"%.2X"
00000100 0A00              A   438    	DB	10,0
00000102                   A   439    L__37:
00000102 54325057 4D483A   A   440    	DB	"T2PWMH:"
00000109 09                A   441    	DB	9
0000010A 252E3258          A   442    	DB	"%.2X"
0000010E 0A00              A   443    	DB	10,0
00000110                   A   444    L__38:
00000110 54325057 4D4C3A   A   445    	DB	"T2PWML:"
00000117 09                A   446    	DB	9
00000118 252E3258          A   447    	DB	"%.2X"
0000011C 0A00              A   448    	DB	10,0
0000011E                   A   449    L__39:
0000011E 54324354 4C303A   A   450    	DB	"T2CTL0:"
00000125 09                A   451    	DB	9
00000126 252E3258          A   452    	DB	"%.2X"
0000012A 0A00              A   453    	DB	10,0
0000012C                   A   454    L__40:
0000012C 54324354 4C313A   A   455    	DB	"T2CTL1:"
00000133 09                A   456    	DB	9
00000134 252E3258          A   457    	DB	"%.2X"
00000138 0A00              A   458    	DB	10,0
0000013A                   A   459    L__41:
0000013A 53656C65          A   460    	DB	"Select a timer 0-2."
0000013E 63742061 
00000142 2074696D 
00000146 65722030 2D322E 
0000014D 0A00              A   461    	DB	10,0
                           A   462    	SEGMENT CODE
                           A   463    ;   91	
                           A   464    ;   92	void timers_print_config(const char *value)
                           A   465    ;   93	{
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:  10


PC     Object              I  Line    Source timer.src
00000110                   A   466    _timers_print_config:
                           A   467    .define "_timers_print_config"
                           A   468    .value _timers_print_config
                           A   469    .class 2
                           A   470    .type 65
                           A   471    .type 0
                           A   472    .endef
                           A   473    .begfunc "timers_print_config",93,"_timers_print_config"
00000110 0802              A   474    	LINK	#2
                           A   475    .line 93
00000112 57E1              A   476    	LD.W	-2(R14),R1
                           A   477    .define "value"
                           A   478    .class 9
                           A   479    .value -2
                           A   480    .type 140
                           A   481    .type 0
                           A   482    .endef
                           A   483    ;   94		uart_printf("\n");
                           A   484    .line 94
00000114 098F 0000         A   485    	PUSH.W	#L__10
00000118 F1 FFFF72         A   486    	CALL	_uart_printf
0000011C 8F02              A   487    	ADD	R15,#2
                           A   488    ;   95		if(strcmp(value, "0") == 0) {
                           A   489    .line 95
0000011E 6FE1              A   490    	LD.SW	R1,-2(R14)
00000120 4502 0002         A   491    	LD	R2,#L__11
00000124 F1 FFFF6C         A   492    	CALL	_strcmp
00000128 9000              A   493    	CP	R0,#0
0000012A EE 41             A   494    	JP	NE,_5_L_22
                           A   495    ;   96			uart_printf("T0H:\t%.2X\n", T0H);
                           A   496    .line 96
0000012C 0300 E300         A   497    	LD.UB	R0,58112:RAM
00000130 100F              A   498    	PUSH	R0
00000132 098F 0004         A   499    	PUSH.W	#L__13
00000136 F1 FFFF63         A   500    	CALL	_uart_printf
0000013A 8F06              A   501    	ADD	R15,#6
                           A   502    ;   97			uart_printf("T0L:\t%.2X\n", T0L);
                           A   503    .line 97
0000013C 0300 E301         A   504    	LD.UB	R0,58113:RAM
00000140 100F              A   505    	PUSH	R0
00000142 098F 000F         A   506    	PUSH.W	#L__14
00000146 F1 FFFF5B         A   507    	CALL	_uart_printf
0000014A 8F06              A   508    	ADD	R15,#6
                           A   509    ;   98			uart_printf("T0RH:\t%.2X\n", T0RH);
                           A   510    .line 98
0000014C 0300 E302         A   511    	LD.UB	R0,58114:RAM
00000150 100F              A   512    	PUSH	R0
00000152 098F 001A         A   513    	PUSH.W	#L__15
00000156 F1 FFFF53         A   514    	CALL	_uart_printf
0000015A 8F06              A   515    	ADD	R15,#6
                           A   516    ;   99			uart_printf("T0RL:\t%.2X\n", T0RL);
                           A   517    .line 99
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:  11


PC     Object              I  Line    Source timer.src
0000015C 0300 E303         A   518    	LD.UB	R0,58115:RAM
00000160 100F              A   519    	PUSH	R0
00000162 098F 0026         A   520    	PUSH.W	#L__16
00000166 F1 FFFF4B         A   521    	CALL	_uart_printf
0000016A 8F06              A   522    	ADD	R15,#6
                           A   523    ;  100			uart_printf("T0PWMH:\t%.2X\n", T0PWMH);
                           A   524    .line 100
0000016C 0300 E304         A   525    	LD.UB	R0,58116:RAM
00000170 100F              A   526    	PUSH	R0
00000172 098F 0032         A   527    	PUSH.W	#L__17
00000176 F1 FFFF43         A   528    	CALL	_uart_printf
0000017A 8F06              A   529    	ADD	R15,#6
                           A   530    ;  101			uart_printf("T0PWML:\t%.2X\n", T0PWML);
                           A   531    .line 101
0000017C 0300 E305         A   532    	LD.UB	R0,58117:RAM
00000180 100F              A   533    	PUSH	R0
00000182 098F 0040         A   534    	PUSH.W	#L__18
00000186 F1 FFFF3B         A   535    	CALL	_uart_printf
0000018A 8F06              A   536    	ADD	R15,#6
                           A   537    ;  102			uart_printf("T0CTL0:\t%.2X\n", T0CTL0);
                           A   538    .line 102
0000018C 0300 E306         A   539    	LD.UB	R0,58118:RAM
00000190 100F              A   540    	PUSH	R0
00000192 098F 004E         A   541    	PUSH.W	#L__19
00000196 F1 FFFF33         A   542    	CALL	_uart_printf
0000019A 8F06              A   543    	ADD	R15,#6
                           A   544    ;  103			uart_printf("T0CTL1:\t%.2X\n", T0CTL1);
                           A   545    .line 103
0000019C 0300 E307         A   546    	LD.UB	R0,58119:RAM
000001A0 100F              A   547    	PUSH	R0
000001A2 098F 005C         A   548    	PUSH.W	#L__20
000001A6 F1 FFFF2B         A   549    	CALL	_uart_printf
000001AA 8F06              A   550    	ADD	R15,#6
                           A   551    ;  104		}
                           A   552    ;  105		else if(strcmp(value, "1") == 0) {
                           A   553    .line 105
000001AC C095              A   554    	JP	_5_L_23
000001AE                   A   555    _5_L_22:
000001AE 6FE1              A   556    	LD.SW	R1,-2(R14)
000001B0 4502 006A         A   557    	LD	R2,#L__21
000001B4 F1 FFFF24         A   558    	CALL	_strcmp
000001B8 9000              A   559    	CP	R0,#0
000001BA EE 41             A   560    	JP	NE,_5_L_20
                           A   561    ;  106			uart_printf("T1H:\t%.2X\n", T1H);
                           A   562    .line 106
000001BC 0300 E310         A   563    	LD.UB	R0,58128:RAM
000001C0 100F              A   564    	PUSH	R0
000001C2 098F 006C         A   565    	PUSH.W	#L__23
000001C6 F1 FFFF1B         A   566    	CALL	_uart_printf
000001CA 8F06              A   567    	ADD	R15,#6
                           A   568    ;  107			uart_printf("T1L:\t%.2X\n", T1L);
                           A   569    .line 107
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:  12


PC     Object              I  Line    Source timer.src
000001CC 0300 E311         A   570    	LD.UB	R0,58129:RAM
000001D0 100F              A   571    	PUSH	R0
000001D2 098F 0077         A   572    	PUSH.W	#L__24
000001D6 F1 FFFF13         A   573    	CALL	_uart_printf
000001DA 8F06              A   574    	ADD	R15,#6
                           A   575    ;  108			uart_printf("T1RH:\t%.2X\n", T1RH);
                           A   576    .line 108
000001DC 0300 E312         A   577    	LD.UB	R0,58130:RAM
000001E0 100F              A   578    	PUSH	R0
000001E2 098F 0082         A   579    	PUSH.W	#L__25
000001E6 F1 FFFF0B         A   580    	CALL	_uart_printf
000001EA 8F06              A   581    	ADD	R15,#6
                           A   582    ;  109			uart_printf("T1RL:\t%.2X\n", T1RL);
                           A   583    .line 109
000001EC 0300 E313         A   584    	LD.UB	R0,58131:RAM
000001F0 100F              A   585    	PUSH	R0
000001F2 098F 008E         A   586    	PUSH.W	#L__26
000001F6 F1 FFFF03         A   587    	CALL	_uart_printf
000001FA 8F06              A   588    	ADD	R15,#6
                           A   589    ;  110			uart_printf("T1PWMH:\t%.2X\n", T1PWMH);
                           A   590    .line 110
000001FC 0300 E314         A   591    	LD.UB	R0,58132:RAM
00000200 100F              A   592    	PUSH	R0
00000202 098F 009A         A   593    	PUSH.W	#L__27
00000206 F1 FFFEFB         A   594    	CALL	_uart_printf
0000020A 8F06              A   595    	ADD	R15,#6
                           A   596    ;  111			uart_printf("T1PWML:\t%.2X\n", T1PWML);
                           A   597    .line 111
0000020C 0300 E315         A   598    	LD.UB	R0,58133:RAM
00000210 100F              A   599    	PUSH	R0
00000212 098F 00A8         A   600    	PUSH.W	#L__28
00000216 F1 FFFEF3         A   601    	CALL	_uart_printf
0000021A 8F06              A   602    	ADD	R15,#6
                           A   603    ;  112			uart_printf("T1CTL0:\t%.2X\n", T1CTL0);
                           A   604    .line 112
0000021C 0300 E316         A   605    	LD.UB	R0,58134:RAM
00000220 100F              A   606    	PUSH	R0
00000222 098F 00B6         A   607    	PUSH.W	#L__29
00000226 F1 FFFEEB         A   608    	CALL	_uart_printf
0000022A 8F06              A   609    	ADD	R15,#6
                           A   610    ;  113			uart_printf("T1CTL1:\t%.2X\n", T1CTL1);
                           A   611    .line 113
0000022C 0300 E317         A   612    	LD.UB	R0,58135:RAM
00000230 100F              A   613    	PUSH	R0
00000232 098F 00C4         A   614    	PUSH.W	#L__30
00000236 F1 FFFEE3         A   615    	CALL	_uart_printf
0000023A 8F06              A   616    	ADD	R15,#6
                           A   617    ;  114		}
                           A   618    ;  115		else if(strcmp(value, "2") == 0) {
                           A   619    .line 115
0000023C C04D              A   620    	JP	_5_L_23
0000023E                   A   621    _5_L_20:
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:  13


PC     Object              I  Line    Source timer.src
0000023E 6FE1              A   622    	LD.SW	R1,-2(R14)
00000240 4502 00D2         A   623    	LD	R2,#L__31
00000244 F1 FFFEDC         A   624    	CALL	_strcmp
00000248 9000              A   625    	CP	R0,#0
0000024A EE 41             A   626    	JP	NE,_5_L_18
                           A   627    ;  116			uart_printf("T2H:\t%.2X\n", T2H);
                           A   628    .line 116
0000024C 0300 E320         A   629    	LD.UB	R0,58144:RAM
00000250 100F              A   630    	PUSH	R0
00000252 098F 00D4         A   631    	PUSH.W	#L__33
00000256 F1 FFFED3         A   632    	CALL	_uart_printf
0000025A 8F06              A   633    	ADD	R15,#6
                           A   634    ;  117			uart_printf("T2L:\t%.2X\n", T2L);
                           A   635    .line 117
0000025C 0300 E321         A   636    	LD.UB	R0,58145:RAM
00000260 100F              A   637    	PUSH	R0
00000262 098F 00DF         A   638    	PUSH.W	#L__34
00000266 F1 FFFECB         A   639    	CALL	_uart_printf
0000026A 8F06              A   640    	ADD	R15,#6
                           A   641    ;  118			uart_printf("T2RH:\t%.2X\n", T2RH);
                           A   642    .line 118
0000026C 0300 E322         A   643    	LD.UB	R0,58146:RAM
00000270 100F              A   644    	PUSH	R0
00000272 098F 00EA         A   645    	PUSH.W	#L__35
00000276 F1 FFFEC3         A   646    	CALL	_uart_printf
0000027A 8F06              A   647    	ADD	R15,#6
                           A   648    ;  119			uart_printf("T2RL:\t%.2X\n", T2RL);
                           A   649    .line 119
0000027C 0300 E323         A   650    	LD.UB	R0,58147:RAM
00000280 100F              A   651    	PUSH	R0
00000282 098F 00F6         A   652    	PUSH.W	#L__36
00000286 F1 FFFEBB         A   653    	CALL	_uart_printf
0000028A 8F06              A   654    	ADD	R15,#6
                           A   655    ;  120			uart_printf("T2PWMH:\t%.2X\n", T2PWMH);
                           A   656    .line 120
0000028C 0300 E324         A   657    	LD.UB	R0,58148:RAM
00000290 100F              A   658    	PUSH	R0
00000292 098F 0102         A   659    	PUSH.W	#L__37
00000296 F1 FFFEB3         A   660    	CALL	_uart_printf
0000029A 8F06              A   661    	ADD	R15,#6
                           A   662    ;  121			uart_printf("T2PWML:\t%.2X\n", T2PWML);
                           A   663    .line 121
0000029C 0300 E325         A   664    	LD.UB	R0,58149:RAM
000002A0 100F              A   665    	PUSH	R0
000002A2 098F 0110         A   666    	PUSH.W	#L__38
000002A6 F1 FFFEAB         A   667    	CALL	_uart_printf
000002AA 8F06              A   668    	ADD	R15,#6
                           A   669    ;  122			uart_printf("T2CTL0:\t%.2X\n", T2CTL0);
                           A   670    .line 122
000002AC 0300 E326         A   671    	LD.UB	R0,58150:RAM
000002B0 100F              A   672    	PUSH	R0
000002B2 098F 011E         A   673    	PUSH.W	#L__39
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:  14


PC     Object              I  Line    Source timer.src
000002B6 F1 FFFEA3         A   674    	CALL	_uart_printf
000002BA 8F06              A   675    	ADD	R15,#6
                           A   676    ;  123			uart_printf("T2CTL1:\t%.2X\n", T2CTL1);
                           A   677    .line 123
000002BC 0300 E327         A   678    	LD.UB	R0,58151:RAM
000002C0 100F              A   679    	PUSH	R0
000002C2 098F 012C         A   680    	PUSH.W	#L__40
000002C6 F1 FFFE9B         A   681    	CALL	_uart_printf
000002CA 8F06              A   682    	ADD	R15,#6
                           A   683    ;  124		}
                           A   684    ;  125		else {
                           A   685    .line 125
000002CC C005              A   686    	JP	_5_L_23
000002CE                   A   687    _5_L_18:
                           A   688    ;  126			uart_printf("Select a timer 0-2.\n");
                           A   689    .line 126
000002CE 098F 013A         A   690    	PUSH.W	#L__41
000002D2 F1 FFFE95         A   691    	CALL	_uart_printf
000002D6 8F02              A   692    	ADD	R15,#2
                           A   693    ;  127		}
                           A   694    ;  128	}
000002D8                   A   695    _5_L_23:
                           A   696    .line 128
000002D8 0001              A   697    	UNLINK	
000002DA FFFC              A   698    	RET	
                           A   699    
                           A   700    
                           A   701    ;**************************** _timers_print_config ***************************
                           A   702    ;Name                         Addr/Register   Size   Type
                           A   703    ;_strcmp                             IMPORT  -----   function
                           A   704    ;_uart_printf                        IMPORT  -----   function
                           A   705    ;value                                R14-2      2   parameter
                           A   706    
                           A   707    
                           A   708    ; Aggregate Stack Size: -2 (words)
                           A   709    
                           A   710    
                           A   711    .endfunc "timers_print_config",128,"_timers_print_config"
00000018 00000000          A   712    	VECTOR	TIMER0=_timer_isr
                           A   713    	XREF _strcmp:EROM
                           A   714    	XREF _uart_printf:EROM
                           A   715    	XREF _button_events:EROM
                           A   716    	XREF _led_update:EROM
                           A   717    	XREF _get_osc_clock:EROM
                           A   718    	XREF __fpltof:EROM
                           A   719    	XREF __fpftol:EROM
                           A   720    	XREF __fpmul:EROM
                           A   721    	XDEF _timers_print_config
                           A   722    	XDEF _timer_interval_float
                           A   723    	XDEF _timer_interval_int
                           A   724    	XDEF _init_timer
                           A   725    	XDEF _timer_isr
ZiLOG ZNEO Macro Assembler Version 1.10 (07022203)                                               29-Mar-11     21:55:20     page:  15


PC     Object              I  Line    Source timer.src
                           A   726    	END


Errors: 0
Warnings: 0
Lines Assembled: 727
